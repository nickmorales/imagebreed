
<%args>
</%args>

<& /util/import_javascript.mas, classes => [ 'jquery.iframe-post-form', 'CXGN.BreederSearch03152022', 'd3.d3v4Min.js', 'opencv.opencv', 'CXGN.ManageDroneImagery08302022' ] &>

<style>
.straightLine, .hrLine{
  position: absolute;
  background-color: red;
  transition: transform .05s ease-in-out;
}
</style>

<div id="manage_drone_imagery_top_div">

    <& /page/page_title.mas, title=>"Manage Aerial Imagery" &>

    <div class="well well-sm">
        <center>
            <h4>Please use the Brave or Chrome web-browsers to view these image tools. In the future, other browsers may be supported.</h4>
            <h4><a href="https://www.youtube.com/channel/UC1FYqz6kz9pE72sSHhG7ocQ">Watch tutorial videos from processing aerial imaging events</a>.</h4>
        </center>
    </div>

<%perl>
#my $buttons_html = "<button class='btn btn-primary' style='margin:3px' id='upload_drone_imagery_link'>Upload Imagery</button><button class='btn btn-default' style='margin:3px' id='download_phenotypes_drone_imagery_link'>Download Image-Phenotypes</button><button class='btn btn-success' style='margin:3px' id='keras_cnn_drone_imagery_link'>CNN Models</button><button class='btn btn-success' style='margin:3px' id='drone_imagery_calculate_statistics_link'>Statistics</button><button class='btn btn-success' style='margin:3px' id='drone_imagery_analytics_link'>Analytics</button><button class='btn btn-default' style='margin:3px' id='drone_imagery_compare_field_images_link'>Compare Aerial Field Images</button><button class='btn btn-default' style='margin:3px' id='drone_imagery_view_imaging_vehicles_link'>Imaging Vehicles</button><button class='btn btn-default' style='margin:3px' id='export_drone_imagery_events'>Export Imaging Events</button>";

my $buttons_html = "<button class='btn btn-primary' style='margin:3px' id='upload_drone_imagery_link'>Upload Imagery</button><button class='btn btn-success' style='margin:3px' id='drone_imagery_analytics_link'>Analytics</button><button class='btn btn-default' style='margin:3px' id='drone_imagery_view_imaging_vehicles_link'>Imaging Vehicles</button><button class='btn btn-default' style='margin:3px' id='download_phenotypes_drone_imagery_link'>Download Image-Phenotype File</button><button class='btn btn-default' style='margin:3px' id='export_drone_imagery_events'>Export Imaging Events</button>";
</%perl>

    <& /page/detail_page_2_col_section.mas, info_section_collapsed => 0, info_section_title => "<h4 style='display:inline'>Aerial Imagery</h4>", info_section_subtitle => 'Please cite <a href="https://acsess.onlinelibrary.wiley.com/doi/full/10.1002/ppj2.20004" target=_blank>ImageBreed</a> if you find any of these tools useful', buttons_html => $buttons_html, icon_class => undef, col1_width_class => "col-sm-0", col2_width_class => "col-sm-12", info_section_id => "manage_drone_imagery_main" &>

</div>

<& /breeders_toolbox/drone_imagery/drone_imagery_analytics.mas &>
<& /breeders_toolbox/drone_imagery/drone_imagery_analysis.mas &>
<& /breeders_toolbox/drone_imagery/drone_imagery_export_imaging_events.mas &>
<& /analyses/store_new_analysis_values_and_model.mas &>

<div id="manage_drone_imagery_standard_process_div" style="display:none">

    <& /page/page_title.mas, title=>"Manage Aerial Imagery: Run A Standard Process On Orthophotomosaics" &>

    <div class="well well-sm">
        <center>
            <h4>Please use the Brave or Chrome web-browsers to view these image tools. In the future, other browsers may be supported.</h4>
            <h4><a href="https://www.youtube.com/channel/UC1FYqz6kz9pE72sSHhG7ocQ">Watch tutorial videos from processing aerial imaging events</a>.</h4>
        </center>
    </div>

    <&| /util/workflow.mas, id=> "manage_drone_imagery_standard_process_workflow" &>
        <&| /util/workflow.mas:step, title=> "Intro" &>
            <& /page/page_title.mas, title=>"This workflow will guide you through applying a standard process to your aerial imaging bands" &>
            <p>Here you can take one of the imaging event bands you uploaded all the way through the process to plot image saving. This will require manual steps such as image rotation, cropping, and plot polygon templating. After you have completed this process for one imaging event band, you can apply it to all other imaging event bands and other calculated vegetative indices.</p>
            <br/><br/>
            <center>
            <button class="btn btn-primary" onclick="Workflow.complete(this); return false;">Go to Next Step</button>
            </center>
        </&>
        <&| /util/workflow.mas:step, title=> "Imaging Event Band" &>
            <& /page/page_title.mas, title=>"Select a imaging event band" &>

            <div class="well well-sm">
                <p>Please select one imaging event band to take through the process. It is recommended to select a band that has high contrast, such as a NIR band. You can choose to brighten the image, only for purposes of the standard process, by selecting below.</p>
            </div>

            <div class="well well-sm">
                <div class="panel panel-default">
                    <div class="panel-body">
                        <table class="table table-bordered table-hover" id="manage_drone_imagery_standard_process_drone_run_bands_table">
                            <thead>
                                <tr>
                                    <th>Select</th>
                                    <th>Imaging Event Band Name</th>
                                    <th>Band Description</th>
                                    <th>Band Type</th>
                                    <th>Imaging Event Name</th>
                                    <th>Imaging Event Description</th>
                                    <th>Imaging Event Date</th>
                                    <th>Field Trial Name</th>
                                    <th>Field Trial Description</th>
                                </tr>
                            </thead>
                        </table>

                        <hr>
                        <div class="form-horizontal">
                            <div class="form-group form-group-sm">
                                <label class="col-sm-6 control-label">Brighten the image? This is only to help complete the standard process when the image is very dark: </label>
                                <div class="col-sm-6">
                                    <select class="form-control" id="manage_drone_imagery_standard_process_brighten_image_option">
                                        <option value=0>No</option>
                                        <option value=1>Yes</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        </hr>

                        <br/>

                        <center>
                        <button class="btn btn-primary" id="manage_drone_imagery_standard_process_drone_run_band_step">Go to Next Step</button>
                        </center>
                    </div>
                </div>
            </div>

        </&>
        <&| /util/workflow.mas:step, title=> "Use GCPs" &>
            <& /page/page_title.mas, title=>"Use ground control points (GCPs) to automate the entire standard process" &>

            <div class="well well-sm">
                <p>If a previous imaging event on this field experiment has already completed the standard process, then that imaging event can be used to automate the rest of the standard process on this new imaging event.</p>
                <p>If ground control points (GCPs) were defined for a previous imaging event, then GCPs can automate the standard process for this new imaging event.</p>
            </div>

            <div class="form-horizontal">
                <div class="form-group form-group-sm">
                    <label class="col-sm-6 control-label">Has a previous imaging event on this field trial completed the standard process already?: </label>
                    <div class="col-sm-6">
                        <select class="form-control" id="manage_drone_imagery_standard_process_ground_control_points_option">
                            <option value="No">No</option>
                            <option value="Yes">Yes, and it has Ground Control Points (GCPs) defined.</option>
                            <option value="Yes_camera_rig">Yes, and the same fixed camera rig was used.</option>
                            <!--option value="Yes_GeoTIFF_params">Yes, and GeoTIFF coordinates are saved for both imaging events.</option-->
                        </select>
                    </div>
                </div>
            </div>

            <div id="manage_drone_imagery_standard_process_ground_control_points_select_div" style="display:none">
                <div class="well well-sm">
                    <div class="panel panel-default">
                        <div class="panel-body">
                            <div class="form-group form-group-sm">
                                <label class="col-sm-6 control-label">Select the aerial imaging event to use as a template: </label>
                                <div class="col-sm-6">
                                    <div id="manage_drone_imagery_standard_process_ground_control_points_select"></div>
                                </div>
                            </div>
                            <br/><br/>
                            <hr>

                            <div class="well well-sm">
                                <ul>
                                    <li>Click on the ground control points (GCPs) in the image below and save them.</li>
                                    <li>Please click and save at least three points. The names of the GCPs MUST be consistent across imaging events!</li>
                                    <li>For best results, use ground control points at the far four corners of the field.</li>
                                    <li>Once the computed polygon template is drawn, you can drag the <b>black dot</b> to reposition the template.</li>
                                    <li>You can zoom out on your browser (Cntrl + -).</li>
                                </ul>
                            </div>

                            <div class="well well-sm">
                                <div id="project_drone_imagery_standard_process_ground_control_points_saved_div"></div>

                                <br/><br/>
                                <center>
                                <button class="btn btn-primary" id="manage_drone_imagery_standard_process_ground_control_points_step">Draw Computed Plot Polygons</button>
                                <button class="btn btn-primary" id="manage_drone_imagery_standard_process_ground_control_points_step_confirm">Confirm and Save</button>
                                </center>
                            </div>

                            <div id="project_drone_imagery_standard_process_ground_control_points_info_div"></div>

                            <div id="project_drone_imagery_standard_process_ground_control_points_loading_div"><img src="/img/wheel.gif" /></div>

                            <div id="project_drone_imagery_standard_process_ground_control_points_svg_div"></div>
                        </div>
                    </div>
                </div>
            </div>
            <div id="manage_drone_imagery_standard_process_previous_camera_rig_select_div" style="display:none">
                <div class="well well-sm">
                    <div class="panel panel-default">
                        <div class="panel-body">
                            <div class="form-group form-group-sm">
                                <label class="col-sm-6 control-label">Note: This is only for greenhouses or setups with fixed camera rigs that capture large sections of an experiment. Select the aerial imaging event to use as a template. The same rotation, cropping, and plot-polygon template will be applied: </label>
                                <div class="col-sm-6">
                                    <div id="manage_drone_imagery_standard_process_previous_camera_rig_select"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <center>
                    <button class="btn btn-primary" id="manage_drone_imagery_standard_process_previous_camera_rig_step_confirm">Confirm and Save</button>
                    </center>
                </div>
            </div>
            <div id="manage_drone_imagery_standard_process_previous_geotiff_params_div" style="display:none">
                <div class="well well-sm">
                    <div class="panel panel-default">
                        <div class="panel-body">

                            <div class="form-horizontal">
                                <div class="form-group">
                                    <label class="col-sm-6 control-label">Select the aerial imaging event to use as a template. The same rotation and plot-polygon template will be applied: </label>
                                    <div class="col-sm-6">
                                        <div id="manage_drone_imagery_standard_process_geotiff_params_select"></div>
                                    </div>
                                </div>
                            </div>

                            <form class="form-horizontal" role="form" method="post" enctype="multipart/form-data" encoding="multipart/form-data" id="manage_drone_imagery_standard_process_previous_geotiff_params_form" name="manage_drone_imagery_standard_process_previous_geotiff_params_form" action="/drone_imagery/standard_process_previous_geotiff" >
                                <div class="form-group">
                                    <label class="col-sm-6 control-label">WGS84/UTM GeoTIFF (.tif): (should be same dimensions as uploaded reflectance maps)</label>
                                    <div class="col-sm-6" >
                                        <input type="file" id="manage_drone_imagery_standard_process_geotiff_params_geotiff" name="manage_drone_imagery_standard_process_geotiff_params_geotiff" encoding="multipart/form-data" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-6 control-label">GeoTIFF Type:</label>
                                    <div class="col-sm-6" >
                                        <select class="form-control" id="manage_drone_imagery_standard_process_geotiff_params_type" name="manage_drone_imagery_standard_process_geotiff_params_type">
                                            <option value="single">Single Channel GeoTIFF</option>
                                            <option value="rgb">RGB GeoTIFF</option>
                                        </select>
                                    </div>
                                </div>
                                <input type="hidden" name="manage_drone_imagery_standard_process_geotiff_params_previous_drone_run_project_id" id="manage_drone_imagery_standard_process_geotiff_params_previous_drone_run_project_id" value="" />
                                <input type="hidden" name="manage_drone_imagery_standard_process_geotiff_params_drone_run_project_id" id="manage_drone_imagery_standard_process_geotiff_params_drone_run_project_id" value="" />
                                <input type="hidden" name="manage_drone_imagery_standard_process_geotiff_params_angle" id="manage_drone_imagery_standard_process_geotiff_params_angle" value="" />
                                <input type="hidden" name="manage_drone_imagery_standard_process_geotiff_params_time_cvterm_id" id="manage_drone_imagery_standard_process_geotiff_params_time_cvterm_id" value="" />
                            </form>

                            <center>
                            <button class="btn btn-primary" id="manage_drone_imagery_standard_process_geotiff_params_confirm">Confirm and Go to Next</button>
                            </center>
                        </div>
                    </div>
                </div>
            </div>
            <div id="manage_drone_imagery_standard_process_ground_control_points_skip_div" style="display:none">
                <center>
                <button class="btn btn-primary" id="manage_drone_imagery_standard_process_ground_control_points_skip_step">Skip and Go to Next Step</button>
                </center>
            </div>

        </&>
        <&| /util/workflow.mas:step, title=> "Rotate" &>
            <& /page/page_title.mas, title=>"Rotate your selected imaging event band" &>

            <div class="well well-sm">
                <ul>
                    <li>Here you can do a rotation of your imaging event image.</li>
                    <li>You can zoom out on your browser (Cntrl + -).</li>
                    <li>Your image should have precise row-to-row parallel alignment.</li>
                    <li>Depending on your field experiment, it may be important that the first plot (e.g. plot number 1) is in the top left or top right corner of the image.</li>
                </ul>
            </div>

            <div class="well well-sm">

                <form class="form-horizontal">
                    <div class="form-group form-group-sm">
                        <label class="col-sm-6 control-label">Rotate Counter-Clockwise Degrees (Use Left and Right Arrows For Fine Tuning): </label>
                        <div class="col-sm-6">
                            <input type="range" min="-180" max="180" step="0.01" id="drone_imagery_standard_process_rotate_degrees_input" name="drone_imagery_standard_process_rotate_degrees_input" value="0.00"><div id="drone_imagery_standard_process_rotate_degrees_input_text"></div>
                        </div>
                    </div>
                </form>

                <!--button class="btn btn-primary" id="drone_imagery_standard_process_rotate_stitched_view">Rotate Image (Does Not Save)</button-->
                <button class="btn btn-default" id="drone_imagery_standard_process_rotate_stitched_crosshairs">Draw Crosshairs Assist</button>
                <!--button class="btn btn-default" id="drone_imagery_standard_process_rotate_stitched_restart">Restart</button-->

                <hr>
                <div id="manage_drone_imagery_standard_process_rotate_step_confirm_div" style="display:none">
                    <button class="btn btn-primary" id="manage_drone_imagery_standard_process_rotate_step">Save Rotated Image And Go To Next Step</button>
                </div>
                <div id="manage_drone_imagery_standard_process_rotate_step_finish_div" style="display:none">
                    <button class="btn btn-primary" id="manage_drone_imagery_standard_process_rotate_step_finish">Save Rotated Image And Go Complete Standard Process</button>
                </div>
            </div>

            <div id="manage_drone_imagery_standard_process_rotate_load_div">
                <img src="/img/wheel.gif" />
            </div>

            <div id="drone_imagery_standard_process_rotate_original_stitched_div"></div>

        </&>
        <&| /util/workflow.mas:step, title=> "Cropping" &>
            <& /page/page_title.mas, title=>"Crop your imaging event band to specific area of interest" &>

            <div class="well well-sm">
                <ul>
                    <li>Here you can do a rough cropping of the stitched ortho image to focus only on the actual field experiment.</li>
                    <li>You can zoom out on your browser (Cntrl + -).</li>
                    <li>Click on four points in the image to make a four-sided polygon.</li>
                    <li>Only the last polygon that you draw will be used for the cropping.</li>
                </ul>
                <br/>
                <button class="btn btn-primary" id="manage_drone_imagery_standard_process_cropping_step">Save and Go to Next Step</button>
            </div>

            <div id="manage_drone_imagery_standard_process_crop_load_div">
                <img src="/img/wheel.gif" />
            </div>

            <canvas id="drone_imagery_standard_process_crop_original_stitched_div"></canvas>

            <hr>
            <div class="well well-sm">
                <form class="form-horizontal">
                    <div class="row">
                        <div class="col-sm-12">
                            <div class="form-group form-group-sm">
                                <label class="col-sm-6 control-label">Previously Used Image Cropping For This Field Trial: </label>
                                <div class="col-sm-6">
                                    <div id="plot_polygons_standard_process_previously_saved_image_cropping_templates">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
                <button class="btn btn-primary" id="drone_imagery_standard_process_cropping_use_previous_cropping">Use Image Cropping</button>
            </div>

        </&>
        <&| /util/workflow.mas:step, title=> "Thresholding" &>
            <& /page/page_title.mas, title=>"Threshold your imaging event band to remove background" &>

            <div class="well">
                <&| /page/info_section.mas, title => 'Remove Background Using Percentage Threshold', collapsible=>1, collapsed => 0, subtitle=> 'Remove the background by specifying percentage threshold value' &>
                    <div class="panel panel-default">
                        <div class="panel-body">
                            <div class="row">
                                <div class="col-sm-6">
                                    <div class="form-group form-group-sm">
                                        <label class="col-sm-6 control-label">Discard Lowest Percent of Pixel Values: </label>
                                        <div class="col-sm-6">
                                            <input class="form-control" id="drone_imagery_standard_process_remove_background_lower_threshold_percentage" name="drone_imagery_standard_process_remove_background_lower_threshold_percentage" type="number" max="99" min="0" placeholder="e.g. 10% of lowest pixel values (Min 0, Max 100)" value=25 disabled/>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-6">
                                    <div class="form-group form-group-sm">
                                        <label class="col-sm-6 control-label">Discard Highest Percent of Pixel Values: </label>
                                        <div class="col-sm-6">
                                            <input class="form-control" id="drone_imagery_standard_process_remove_background_upper_threshold_percentage" name="drone_imagery_standard_process_remove_background_upper_threshold_percentage" type="number" max="99" min="0" placeholder="e.g. 10% of highest pixel values (Min 0, Max 100)" value=25 disabled/>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <hr>

                            <input type="checkbox" id="drone_imagery_standard_process_remove_background_upper_threshold_percentage_change_button">&nbsp;&nbsp;&nbsp;&nbsp; Change Threshold Values
                        </div>
                    </div>
                </&>
            </div>

            <center>
                <button id="drone_imagery_standard_process_remove_background_defined_percentage_submit" class="btn btn-primary">Apply Threshold</button>
            </center>

            <hr>

            <div id="manage_drone_imagery_standard_process_remove_background_load_div">
                <img src="/img/wheel.gif" />
            </div>

            <div class="well well-sm">
                <&| /page/info_section.mas, title => 'Histogram of pixel values', collapsible=>1, collapsed => 0, subtitle=> 'Histogram of Pixel Values' &>
                    <center>
                        <canvas id="drone_imagery_standard_process_remove_background_histogram_div"></canvas>
                    </center>
                </&>
            </div>

            <div class="well well-sm">
                <&| /page/info_section.mas, title => 'Denoised Original Image', collapsible=>1, collapsed => 0, subtitle=> 'Denoised Original Image' &>
                    <center>
                        <canvas id="drone_imagery_standard_process_remove_background_original"></canvas>
                    </center>
                </&>
            </div>

        </&>
        <&| /util/workflow.mas:step, title=> "Plot Polygons" &>
            <& /page/page_title.mas, title=>"Define plot polygons relative to the field layout" &>

            <& /page/detail_page_2_col_section.mas, info_section_collapsible=>1, info_section_collapsed=>0, info_section_title => "<h4 style='display:inline'>Generate Polygon Template Tool</h4>", info_section_subtitle => 'Overlay a uniform grid over the image.', icon_class => "glyphicon glyphicon-th-large", info_section_id => "manage_drone_imagery_standard_process_generate_plot_polygons_section" &>

            <div class="well well-sm">
                <div id="drone_imagery_standard_process_plot_polygons_top_section"></div>

                <button id="drone_imagery_standard_process_plot_polygons_clear" class="btn btn-danger">Clear All Polygons and Start Over Templating</button>
                <br/><br/>
                <button id="drone_imagery_standard_process_plot_polygons_get_distance" class="btn btn-default">Find Distance Between Points</button>
                <button id="drone_imagery_standard_process_plot_polygons_switch_image_url" class="btn btn-default">Switch Between Original and Background Removed Image</button>
            </div>

            <div id="manage_drone_imagery_standard_process_plot_polygons_load_div">
                <img src="/img/wheel.gif" />
            </div>

            <div id="drone_imagery_standard_process_plot_polygons_original_stitched_div_svg"></div>

            <hr>
            <div class="well well-sm">

                <div id="drone_imagery_standard_process_generated_polygons_table_header_div"></div>

                <div class="panel panel-default"><div class="panel-body">
                    <h3>(Option 1)</h3>

                    <&| /page/info_section.mas, title => 'Auto Assign Plot Numbers to Polygon Numbers', collapsible=>1, collapsed => 1, subtitle=> 'Interface for automatically assigning plot numbers to polygon numbers.' &>
                        <div class="well well-sm">
                            <div id="drone_imagery_standard_process_generated_polygons_div">First Complete the Templating Above</div>
                        </div>
                    </&>
                </div></div>

                <div class="panel panel-default"><div class="panel-body">
                    <h3>(Option 2)</h3>

                    <&| /page/info_section.mas, title => 'Upload Spreadsheet File to Assign Plot Numbers to Polygon Numbers', collapsible=>1, collapsed => 1, subtitle=> 'Upload a spreadsheet file assigning plot numbers to polygon numbers.' &>
                        <div class="well well-sm">
                            <div id="drone_imagery_standard_process_generated_polygons_spreadsheet_div">
                                <div class="panel panel-default">
                                    <div class="panel-body">
                                        <ul>
                                            <li>If Option 1 is unable to fit your field experiments, Option 2 and 3 enable greater flexibility.</li>
                                            <li>Upload an <b>XLS</b> file with the following three columns: <b>polygon_number, plot_number, field_trial</b>
                                                <ul>
                                                    <li><b>polygon_number</b>: The polygon number generated in the templating process. The polygon numbers are visible in the templated image.</li>
                                                    <li><b>plot_number</b>: The plot number to assign to the polygon number. Field layouts are visible at the bottom of this page, where available plot numbers can be determined.</li>
                                                    <li><b>field_trial</b>: The field trial for the plot number being assigned. The same plot number (e.g. 101) can exist in different field trials, so this column differentiates plot numbers among field trials.</li>
                                                </ul>
                                            </li>
                                            <li>If you want to skip a generated polygon number, simply do not include it in the uploaded spreadsheet.</li>
                                        </ul>
                                    </div>
                                </div>
                                <div class="panel panel-default">
                                    <div class="panel-body">
                                        <form class="form-horizontal" role="form" method="post" enctype="multipart/form-data" encoding="multipart/form-data" id="drone_imagery_plot_polygons_spreadsheet_upload_form" name="drone_imagery_plot_polygons_spreadsheet_upload_form">
                                            <div class="form-group form-group-sm">
                                                <label class="col-sm-3 control-label">Spreadsheet Upload (.xls): </label>
                                                <div class="col-sm-9">
                                                    <input class="form-control" id="drone_imagery_plot_polygons_spreadsheet_upload" name="drone_imagery_plot_polygons_spreadsheet_upload" type="file" encoding="multipart/form-data" />
                                                    <input id="drone_imagery_plot_polygons_spreadsheet_upload_stock_polygons" name="drone_imagery_plot_polygons_spreadsheet_upload_stock_polygons" type="hidden" />
                                                </div>
                                            </div>
                                        </form>

                                        <div id="drone_imagery_plot_polygons_spreadsheet_upload_form_response_div"></div>

                                        <button class="btn btn-primary" id="drone_imagery_plot_polygons_spreadsheet_upload_button" name="drone_imagery_plot_polygons_spreadsheet_upload_button">Generate Assignments (Does Not Save)</button>&nbsp;&nbsp;&nbsp;<button class="btn btn-primary" name="drone_imagery_standard_process_plot_polygons_submit_bottom">Finish and Save Polygons To Plots</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </&>
                </div></div>

                <div class="panel panel-default"><div class="panel-body">
                    <h3>(Option 3)</h3>

                    <&| /page/info_section.mas, title => 'Manually Assign Plot Numbers to Polygon Numbers', collapsible=>1, collapsed => 1, subtitle=> 'Table input for manually assigning plot numbers to polygon numbers.' &>
                        <div class="well well-sm">
                            <div id="drone_imagery_standard_process_generated_polygons_table">First Complete the Templating Above</div>
                        </div>
                    </&>
                </div></div>

            </div>

            <hr>
            <div class="well well-sm">
                <div id="drone_imagery_standard_process_trial_layout_div_0"></div>
                <div id="drone_imagery_standard_process_trial_layout_div_1"></div>
                <div id="drone_imagery_standard_process_trial_layout_div_2"></div>
                <div id="drone_imagery_standard_process_trial_layout_div_3"></div>
                <div id="drone_imagery_standard_process_trial_layout_div_4"></div>
                <div id="drone_imagery_standard_process_trial_layout_div_5"></div>
                <div id="drone_imagery_standard_process_trial_layout_div_6"></div>
                <div id="drone_imagery_standard_process_trial_layout_div_7"></div>
                <div id="drone_imagery_standard_process_trial_layout_div_8"></div>
                <div id="drone_imagery_standard_process_trial_layout_div_9"></div>
                <div id="drone_imagery_standard_process_trial_layout_div_10"></div>
                <div id="drone_imagery_standard_process_trial_layout_div_11"></div>
                <div id="drone_imagery_standard_process_trial_layout_div_12"></div>
                <div id="drone_imagery_standard_process_trial_layout_div_13"></div>
                <div id="drone_imagery_standard_process_trial_layout_div_14"></div>
                <div id="drone_imagery_standard_process_trial_layout_div_15"></div>
                <div id="drone_imagery_standard_process_trial_layout_div_16"></div>
                <div id="drone_imagery_standard_process_trial_layout_div_17"></div>
                <div id="drone_imagery_standard_process_trial_layout_div_18"></div>
                <div id="drone_imagery_standard_process_trial_layout_div_19"></div>
                <div id="drone_imagery_standard_process_trial_layout_div_20"></div>
                <div id="drone_imagery_standard_process_trial_layout_div_21"></div>
                <div id="drone_imagery_standard_process_trial_layout_div_22"></div>
                <div id="drone_imagery_standard_process_trial_layout_div_23"></div>
                <div id="drone_imagery_standard_process_trial_layout_div_24"></div>
                <div id="drone_imagery_standard_process_trial_layout_div_25"></div>
                <div id="drone_imagery_standard_process_trial_layout_div_26"></div>
                <div id="drone_imagery_standard_process_trial_layout_div_27"></div>
                <div id="drone_imagery_standard_process_trial_layout_div_28"></div>
                <div id="drone_imagery_standard_process_trial_layout_div_29"></div>
                <div id="drone_imagery_standard_process_trial_layout_div_30"></div>
            </div>

        </&>
        <&| /util/workflow.mas:step, title=> "Apply" &>
            <& /page/page_title.mas, title=>"Apply these same steps to other imaging event bands in the current imaging event" &>

            <div class="well well-sm">
                <ul>
                    <li>Here you can apply the same actions you did for the previous steps 1 to 6, to additional imaging event bands in this imaging event.</li>
                    <li>Thresholding will be done dynamically, by removing the top and bottom 20% of pixel values.</li>
                </ul>
            </div>

            <div class="well well-sm">
                <div class="panel panel-default">
                    <div class="panel-body">
                        <table class="table table-bordered table-hover" id="manage_drone_imagery_standard_process_drone_run_bands_apply_table">
                            <thead>
                                <tr>
                                    <th>Select</th>
                                    <th>Imaging Event Band Name</th>
                                    <th>Band Description</th>
                                    <th>Band Type</th>
                                    <th>Imaging Event Name</th>
                                    <th>Imaging Event Description</th>
                                    <th>Imaging Event Date</th>
                                    <th>Field Trial Name</th>
                                    <th>Field Trial Description</th>
                                </tr>
                            </thead>
                        </table>

                        <br/>

                        <center>
                        <button class="btn btn-primary" id="manage_drone_imagery_standard_process_drone_run_band_apply_step">Go to Next Step</button>
                        </center>
                    </div>
                </div>
            </div>
        </&>
        <&| /util/workflow.mas:step, title=> "Indices" &>
            <& /page/page_title.mas, title=>"Create and apply these same steps to vegetative indices" &>

            <form class="form-horizontal">
                <div class="form-group form-group-sm">
                    <label class="col-sm-6 control-label">Vegetative Indices To Apply: </label>
                    <div class="col-sm-6">
                        <input name="drone_imagery_standard_process_apply_indices_select" value="TGI" type="checkbox" checked> Triangular Greenness Index (TGI) <br/>
                        <input name="drone_imagery_standard_process_apply_indices_select" value="VARI" type="checkbox" checked> Visible Atmospheric Resistant Index (VARI) <br/>
                        <input name="drone_imagery_standard_process_apply_indices_select" value="NDVI" type="checkbox" checked> Normalized Difference Vegetative Index (NDVI) <br/>
                        <input name="drone_imagery_standard_process_apply_indices_select" value="NDRE" type="checkbox" checked> Normalized Difference Red Edge Vegetative Index (NDRE) <br/>
                        <input name="drone_imagery_standard_process_apply_indices_select" value="CCC" type="checkbox" checked> Canopy Cover Canopeo Algorithm (CC) <br/>
                    </div>
                </div>
            </form>

            <br/>

            <center>
            <button type="button" class="btn btn-primary" id="manage_drone_imagery_standard_process_indices_step">Go to Next Step</button>
            </center>
        </&>
        <&| /util/workflow.mas:step, title=> "Phenotypes" &>
            <& /page/page_title.mas, title=>"Calculate phenotypes for all plot polygon images" &>

            <form class="form-horizontal">
                <div class="well well-sm">
                    <div class="form-group form-group-sm">
                        <label class="col-sm-4 control-label">Zonal Statistics to Calculate and Save in Database: </label>
                        <div class="col-sm-8">
                            <input name="drone_imagery_standard_process_phenotypes_select" value="zonal" type="checkbox" checked disabled> Zonal Statistics: nonzero_pixel_count, total_pixel_sum, mean_pixel_value, harmonic_mean_value, median_pixel_value, variance_pixel_value, stdev_pixel_value, pstdev_pixel_value, min_pixel_value, max_pixel_value, minority_pixel_value, minority_pixel_count, majority_pixel_value, majority_pixel_count, pixel_variety_count <br/>
                        </div>
                    </div>
                </div>
                <div class="well well-sm">
                    <input type="checkbox" id="drone_imagery_standard_process_phenotypes_margin_button">&nbsp;&nbsp;&nbsp;&nbsp; Change Margin Values
                    <hr>

                    <div class="row">
                        <div class="col-sm-6">
                            <div class="form-group form-group-sm">
                                <label class="col-sm-8 control-label">Buffer Margin When Calculating Phenotypes On Top/Bottom of Plot Polygons (%): </label>
                                <div class="col-sm-4">
                                    <input class="form-control" id="drone_imagery_standard_process_phenotypes_margin_top_bottom" name="drone_imagery_standard_process_phenotypes_margin_top_bottom" type="number" value=5 disabled/>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="form-group form-group-sm">
                                <label class="col-sm-8 control-label">Buffer Margin When Calculating Phenotypes On Left/Right of Plot Polygons (%): </label>
                                <div class="col-sm-4">
                                    <input class="form-control" id="drone_imagery_standard_process_phenotypes_margin_left_right" name="drone_imagery_standard_process_phenotypes_margin_left_right" type="number" value=5 disabled/>
                                </div>
                            </div>
                        </div>
                    </div>

                    <hr>

                    <div id="drone_imagery_standard_process_phenotypes_margin_visual_div_svg"><div class="well well-sm"><p>LOADING...Please wait...</p></div></div>
                </div>
                <div class="well well-sm">
                    <div class="form-group form-group-sm">
                        <label class="col-sm-9 control-label">Apply same standard process to all uploaded imaging events that use the same camera rig (Only applicable for static camera rigs, such as in a greenhouse or controlled environment): </label>
                        <div class="col-sm-3">
                            <select class="form-control" id="drone_imagery_standard_process_camera_rig_apply_select">
                                <option value="No">No</option>
                                <option value="Yes">Yes</option>
                            </select>
                        </div>
                    </div>
                </div>
            </form>
            <br/>

            <div id="drone_imagery_standard_process_week_term_div"></div>

            <center>
            <button type="button" class="btn btn-info" id="manage_drone_imagery_standard_process_phenotypes_step">Finish</button>
            </center>
        </&>
    </&>

</div>

<& /breeders_toolbox/drone_imagery/standard_process_raw_images.mas &>

<div id="project_drone_imagery_ground_control_points_div" style="display:none">

    <& /page/page_title.mas, title=>"Manage Aerial Imagery: Save Ground Control Points" &>

    <div id="project_drone_imagery_ground_control_points_title_div"></div>

    <div class="well well-sm">
        <ul>
            <li>Click on the ground control points (GCPs) in the image below and save them.</li>
            <li>Please click and save at least three points. The names of the GCPs MUST be consistent across imaging events!.</li>
            <li>You can move to different images (e.g. blue, green, red, NIR, BGR) which are available after the standard process has been completed.</li>
            <li>You can zoom out on your browser (Cntrl + -).</li>
        </ul>
    </div>

    <div id="project_drone_imagery_ground_control_points_next_buttons" style="display:none">
        <button class="btn btn-default" id="project_drone_imagery_ground_control_points_previous_image">View Previous Image Type</button>
        <button class="btn btn-default" id="project_drone_imagery_ground_control_points_next_image">View Next Image Type</button>
        <br/><br/>
    </div>

    <div class="well well-sm">
        <div id="project_drone_imagery_ground_control_points_saved_div"></div>
    </div>

    <div id="project_drone_imagery_ground_control_points_image_type_div"></div>
    <div id="project_drone_imagery_ground_control_points_info_div"></div>

    <div id="project_drone_imagery_ground_control_points_loading_div"><img src="/img/wheel.gif" /></div>

    <div id="project_drone_imagery_ground_control_points_svg_div"></div>

</div>

<div class="modal fade" id="project_drone_imagery_ground_control_points_form_dialog" name="project_drone_imagery_ground_control_points_form_dialog" tabindex="-1" role="dialog" aria-labelledby="saveGroundControlPointsDialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="saveGroundControlPointsDialog">Save Ground Control Points</h4>
      </div>
      <div class="modal-body">
        <div class="container-fluid">
            <div class="form-horizontal">
                <div class="form-group form-group-sm">
                    <label class="col-sm-6 control-label">Ground Control Point Name (Can overwrite if same name is used. Names MUST be consistent across imaging events!): </label>
                    <div class="col-sm-6">
                        <input class="form-control" id="project_drone_imagery_ground_control_points_form_input_name" name="project_drone_imagery_ground_control_points_form_input_name" type="text" placeholder="e.g. NorthWest Corner, or Point 1" />
                    </div>
                </div>
                <div class="form-group form-group-sm">
                    <label class="col-sm-6 control-label">Latitude (optional): </label>
                    <div class="col-sm-6">
                        <input class="form-control" id="project_drone_imagery_ground_control_points_form_input_latitude" name="project_drone_imagery_ground_control_points_form_input_latitude" type="text" />
                    </div>
                </div>
                <div class="form-group form-group-sm">
                    <label class="col-sm-6 control-label">Longitude (optional): </label>
                    <div class="col-sm-6">
                        <input class="form-control" id="project_drone_imagery_ground_control_points_form_input_longitude" name="project_drone_imagery_ground_control_points_form_input_longitude" type="text" />
                    </div>
                </div>
                <div class="form-group form-group-sm">
                    <label class="col-sm-6 control-label">X Pos: </label>
                    <div class="col-sm-6">
                        <input class="form-control" id="project_drone_imagery_ground_control_points_form_input_x_pos" name="project_drone_imagery_ground_control_points_form_input_x_pos" type="text" />
                    </div>
                </div>
                <div class="form-group form-group-sm">
                    <label class="col-sm-6 control-label">Y Pos: </label>
                    <div class="col-sm-6">
                        <input class="form-control" id="project_drone_imagery_ground_control_points_form_input_y_pos" name="project_drone_imagery_ground_control_points_form_input_y_pos" type="text" />
                    </div>
                </div>
            </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary" id="project_drone_imagery_ground_control_points_form_save">Save GCP</button>
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<div id="manage_drone_imagery_standard_process_raw_images_div" style="display:none">

    <& /page/page_title.mas, title=>"Manage Aerial Imagery: Run A Standard Process On Raw Images" &>

    <&| /util/workflow.mas, id=> "manage_drone_imagery_standard_process_raw_images_workflow" &>
        <&| /util/workflow.mas:step, title=> "Intro" &>
            <& /page/page_title.mas, title=>"This workflow will guide you through applying a standard process to your aerial imaging bands" &>

            <div class="well well-sm">
                <p>This process will allow you to manually assign plot-polygons to the raw images.</p>
            </div>

            <br/><br/>
            <center>
            <button class="btn btn-primary" onclick="Workflow.complete(this); return false;">Go to Next Step</button>
            </center>
        </&>
        <&| /util/workflow.mas:step, title=> "Plot Polygons" &>
            <& /page/page_title.mas, title=>"Manually assign plot-polygons to raw images" &>

            <div class="well well-sm">
                <ul>
                    <li>(1) Select an image from the grid below and adjust the rotation.</li>
                    <li>(2) Click the four corners encompassing a group of plots of interest. Alternatively, paste a previously used template.</li>
                    <li>(3) Type the plot numbers corresponding to the drawn plot-polygons in the drawn table.</li>
                    <li>(4) Click assign plot-polygons to save. Repeat steps 1 to 4 until all plots have been assigned an image.</li>
                </ul>
            </div>

            <div class="form-horizontal">
                <div class="form-group form-group-sm">
                    <label class="col-sm-2 control-label">Click Raw Image Stack: </label>
                    <div class="col-sm-10">
                        <div id="drone_imagery_standard_process_raw_images_image_id_select_div"></div>
                    </div>
                </div>
            </div>
            <hr>

            <canvas id="drone_imagery_standard_process_raw_images_show"></canvas>
            <canvas id="drone_imagery_standard_process_raw_images_show_another_image"></canvas>
            <canvas id="drone_imagery_standard_process_raw_images_show_another_image_second"></canvas>

            <hr>
            <button class="btn btn-default btn-sm" id="drone_imagery_standard_process_raw_images_paste_previous_polygon_in_place" onclick="return false;">Paste Previously Used Plot-Polygon</button>
            <button class="btn btn-default btn-sm" id="drone_imagery_standard_process_raw_images_paste_previous_polygon_view_image" onclick="return false;">View Another Image Also</button>
            <button class="btn btn-default btn-sm" id="drone_imagery_standard_process_raw_images_paste_previous_polygon_view_image_second" onclick="return false;">View Another Image Also</button>

            <hr>
            <form class="form-horizontal">
                <div class="form-group form-group-sm">
                    <label class="col-sm-6 control-label">Rotate Counter-Clockwise Degrees: </label>
                    <div class="col-sm-6">
                        <input class="form-control" id="drone_imagery_standard_process_raw_images_rotate_degrees_input" name="drone_imagery_standard_process_raw_images_rotate_degrees_input" type="text" placeholder="Number of degrees to rotate" value="0.00"/>
                    </div>
                </div>
            </form>
            <button class="btn btn-primary btn-sm" id="drone_imagery_standard_process_raw_images_rotate_image" onclick="return false;">Rotate Image</button>
            <hr>

            <form class="form-horizontal">
                <div class="form-group form-group-sm">
                    <label class="col-sm-6 control-label">Trained Mask R-CNN Models: </label>
                    <div class="col-sm-6">
                        <div id="drone_imagery_standard_process_raw_images_retrain_mask_rcnn_models_div"></div>
                    </div>
                </div>
            </form>
            <button class="btn btn-primary btn-sm" id="drone_imagery_standard_process_raw_images_retrain_mask_rcnn_predict_button" onclick="return false;">Predict Mask</button>
            <button class="btn btn-primary btn-sm" id="drone_imagery_standard_process_raw_images_retrain_mask_rcnn_modal_button" onclick="return false;">Retrain Mask R-CNN</button>
            <hr>

            <hr>
            <button class="btn btn-primary btn-sm" id="drone_imagery_standard_process_raw_images_save_polygon" onclick="return false;">Save Plot-Polygon</button>
            <button class="btn btn-primary btn-sm" id="drone_imagery_standard_process_raw_images_paste_polygon" onclick="return false;">Paste Plot-Polygon</button>
            <button class="btn btn-danger btn-sm" id="drone_imagery_standard_process_raw_images_clear_polygon" onclick="return false;">Start Over</button>
            <hr>

            <hr>
            <form class="form-horizontal">
                <div class="form-group form-group-sm">
                    <label class="col-sm-6 control-label">Previously used plot-polygons: </label>
                    <div class="col-sm-6">
                        <div id="drone_imagery_standard_process_raw_images_previous_polygons_div"></div>
                    </div>
                </div>
            </form>
            <button class="btn btn-primary btn-sm" id="drone_imagery_standard_process_raw_images_paste_previous_polygon" onclick="return false;">Paste Previously Used Plot-Polygon To A New Point</button>
            <hr>

            <div class="form-horizontal">
                <div class="form-group form-group-sm">
                    <label class="col-sm-3 control-label">Number of Rows: </label>
                    <div class="col-sm-9">
                        <input type="number" class="form-control" id="drone_imagery_standard_process_raw_images_number_rows" name="drone_imagery_standard_process_raw_images_number_rows" placeholder="0"/>
                    </div>
                </div>
                <div class="form-group form-group-sm">
                    <label class="col-sm-3 control-label">Number of Columns: </label>
                    <div class="col-sm-9">
                        <input type="number" class="form-control" id="drone_imagery_standard_process_raw_images_number_columns" name="drone_imagery_standard_process_raw_images_number_columns" placeholder="0"/>
                    </div>
                </div>
                <div class="form-group form-group-sm">
                    <label class="col-sm-3 control-label">Template Name: </label>
                    <div class="col-sm-9">
                        <input type="text" class="form-control" id="drone_imagery_standard_process_raw_images_partial_template_name" name="drone_imagery_standard_process_raw_images_partial_template_name" placeholder="e.g. 3rd Range 2x4"/>
                    </div>
                </div>
            </div>
            <button class="btn btn-primary btn-sm" id="drone_imagery_standard_process_raw_images_draw_polygons" onclick="return false;">Draw Plot-Polygon (Does Not Save)</button>
            <hr>

            <div id="drone_imagery_standard_process_raw_images_polygon_assign_table" name="drone_imagery_standard_process_raw_images_polygon_assign_table"></div>

            <br/><br/>
            <center>
            <button class="btn btn-primary" id="drone_imagery_standard_process_raw_images_assign_plot" onclick="return false;">Assign Plot Images (Saves)</button>
            </center>

            <hr>
            <div id="drone_imagery_standard_process_raw_images_assigned_plot_images" name="drone_imagery_standard_process_raw_images_assigned_plot_images"></div>
        </&>
    </&>

</div>


<div id="manage_drone_imagery_vegetative_index_div" style="display:none">

    <& /page/page_title.mas, title=>"Manage Aerial Imagery: Convert to Vegetative Index" &>

    <div class="well well-sm">
        <ul>
            <li>Here you can convert to a vegetative index.</li>
            <li>If you have a NIR band, you can calculate "Normalized difference vegetative index", NDVI.</li>
            <li>If you have an RGB image, you can calculate "Visible atmospheric resistant index", VARI, or "Triangular greenness index", TGI.</li>
            <li>If you have red or blue or green, or images from any spectral band, you can calculate ratios to use as your vegetative index.</li>
        </ul>
    </div>

    <hr>
    <div id="manage_drone_imagery_vegetative_index_tgi_bgr_div" style="display:none">
        <button class="btn btn-primary" id="drone_imagery_vegetative_index_TGI_bgr">Calculate "Triangular Greenness Index" TGI. TGI = {Green band2} - 0.39*{Red band3} - 0.61*{Blue band1}</button>
        <hr>
    </div>
    <div id="manage_drone_imagery_vegetative_index_vari_bgr_div" style="display:none">
        <button class="btn btn-primary" id="drone_imagery_vegetative_index_VARI_bgr">Calculate "Visible Atmospheric Resistant Index" VARI. VARI = ({Green band2} - {Red band3}) / ({Green band2} + {Red band3} - {Blue band1})</button>
        <hr>
    </div>
    <div id="manage_drone_imagery_vegetative_index_tgi_rgb_div" style="display:none">
        <button class="btn btn-primary" id="drone_imagery_vegetative_index_TGI_rgb">Calculate "Triangular Greenness Index" TGI. TGI = {Green band2} - 0.39*{Red band1} - 0.61*{Blue band3}</button>
        <hr>
    </div>
    <div id="manage_drone_imagery_vegetative_index_vari_rgb_div" style="display:none">
        <button class="btn btn-primary" id="drone_imagery_vegetative_index_VARI_rgb">Calculate "Visible Atmospheric Resistant Index" VARI. VARI = ({Green band2} - {Red band1}) / ({Green band2} + {Red band1} - {Blue band3})</button>
        <hr>
    </div>
    <div id="manage_drone_imagery_vegetative_index_ndvi_div" style="display:none">
        <button class="btn btn-primary" id="drone_imagery_vegetative_index_NDVI">Calculate "Normalized Difference Vegetative Index" NDVI. NDVI = ({NIR band1} - {Red band2}) / ({NIR band1} + {Red band2})</button>
        <hr>
    </div>
    <div id="manage_drone_imagery_vegetative_index_ndre_div" style="display:none">
        <button class="btn btn-primary" id="drone_imagery_vegetative_index_NDRE">Calculate "Normalized Difference Red Edge" NDRE. NDRE = ({NIR band1} - {Red Edge band2}) / ({NIR band1} + {Red Edge band2})</button>
        <hr>
    </div>

    <button class="btn btn-success" id="drone_imagery_rgb_vegetative_index_submit">Finish and Save Vegetative Index</button>
    <hr>

    <canvas id="drone_imagery_vegetative_index_original_stitched_div"></canvas>
</div>

<div id="manage_drone_imagery_remove_background_div" style="display:none">

    <& /page/page_title.mas, title=>"Manage Aerial Imagery: Remove Background" &>

    <div class="well">
        <&| /page/info_section.mas, title => 'Remove Background Using Graphical Threshold', collapsible=>1, collapsed => 1, subtitle=> 'Remove the background using a simple threshold value' &>

            <div class="panel panel-default">
                <div class="panel-body">
                    <div class="well well-sm">
                        <h5>The background can be removed by placing a threshold on pixel values</h5>
                        <ul>
                            <li><b>1.</b> Click on the two right-most, highest peaks in the histogram. The right most peak represents the pixels we are interested in, while the peak immediately to the left of that peak represents the soil background.</li>
                            <li><b>2.</b> Click on the "Find Minimum" button.</li>
                            <li><b>3.</b> If the image looks good with the applied threshold, click Save. Otherwise, you can start over.</li>
                        </ul>
                    </div>

                    <div class="well well-sm">
                        <div name="drone_imagery_remove_background_threshold_current"></div>
                        <div name="drone_imagery_remove_background_threshold"></div>
                    </div>

                    <canvas id="drone_imagery_remove_background_histogram_div"></canvas>
                    <hr>
                    <button class="btn btn-primary" id="drone_imagery_remove_background_find_minimum">Find Minimum (Does Not Save)</button>
                    <button class="btn btn-default" id="drone_imagery_remove_background_start_over">Start Over</button>
                    <button class="btn btn-primary" id="drone_imagery_remove_background_submit">Save</button>
                    <hr>
                </div>
            </div>
        </&>
    </div>
    <div class="well">
        <&| /page/info_section.mas, title => 'Remove Background Using User Defined Threshold', collapsible=>1, collapsed => 1, subtitle=> 'Remove the background using a simple threshold value' &>
            <div class="panel panel-default">
                <div class="panel-body">
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="form-group form-group-sm">
                                <label class="col-sm-6 control-label">Discard Pixels with Value Lower Than: </label>
                                <div class="col-sm-6">
                                    <input class="form-control" id="drone_imagery_remove_background_lower_threshold" name="drone_imagery_remove_background_lower_threshold" type="number" max="255" min="0" placeholder="e.g. 10 (Min 0)" />
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="form-group form-group-sm">
                                <label class="col-sm-6 control-label">Discard Pixels with Value Higher Than: </label>
                                <div class="col-sm-6">
                                    <input class="form-control" id="drone_imagery_remove_background_upper_threshold" name="drone_imagery_remove_background_upper_threshold" type="number" max="255" min="0" placeholder="e.g. 200 (Max 255)"/>
                                </div>
                            </div>
                        </div>
                    </div>
                    <button id="drone_imagery_remove_background_defined_submit" class="btn btn-primary">Apply Threshold</button>
                </div>
            </div>
        </&>
    </div>
    <div class="well">
        <&| /page/info_section.mas, title => 'Remove Background Using Percentage Threshold', collapsible=>1, collapsed => 1, subtitle=> 'Remove the background by specifying percentage threshold value' &>
            <div class="panel panel-default">
                <div class="panel-body">
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="form-group form-group-sm">
                                <label class="col-sm-6 control-label">Discard Lowest Percent of Pixel Values: </label>
                                <div class="col-sm-6">
                                    <input class="form-control" id="drone_imagery_remove_background_lower_threshold_percentage" name="drone_imagery_remove_background_lower_threshold_percentage" type="number" max="99" min="0" placeholder="e.g. 10% of lowest pixel values (Min 0, Max 100)" />
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="form-group form-group-sm">
                                <label class="col-sm-6 control-label">Discard Highest Percent of Pixel Values: </label>
                                <div class="col-sm-6">
                                    <input class="form-control" id="drone_imagery_remove_background_upper_threshold_percentage" name="drone_imagery_remove_background_upper_threshold_percentage" type="number" max="99" min="0" placeholder="e.g. 10% of highest pixel values (Min 0, Max 100)"/>
                                </div>
                            </div>
                        </div>
                    </div>
                    <button id="drone_imagery_remove_background_defined_percentage_submit" class="btn btn-primary">Apply Threshold</button>
                </div>
            </div>
        </&>
    </div>

    <hr>

    <div id="manage_drone_imagery_remove_background_load_div">
        <img src="/img/wheel.gif" />
    </div>

    <canvas id="drone_imagery_remove_background_original"></canvas>
</div>

<div id="manage_drone_imagery_plot_polygons_div" style="display:none">

    <& /page/page_title.mas, title=>"Manage Aerial Imagery: Define Plot Polygons" &>

    <div id="manage_drone_imagery_plot_polygons_div_title"></div>

    <& /page/detail_page_2_col_section.mas, info_section_collapsible=>1, info_section_collapsed=>0, info_section_title => "<h4 style='display:inline'>Generate Polygon Template Tool</h4>", info_section_subtitle => 'Overlay a uniform grid over the image.', icon_class => "glyphicon glyphicon-th-large", info_section_id => "manage_drone_imagery_generate_plot_polygons_section" &>

    <div class="well well-sm">
        <div id="drone_imagery_plot_polygons_top_section"></div>

        <button id="drone_imagery_plot_polygons_clear" class="btn btn-danger">Clear All Polygons And Start Over Templating</button>
        <button id="drone_imagery_plot_polygons_clear_one" class="btn btn-danger">Remove One Polygon</button>
        <button id="drone_imagery_plot_polygons_get_distance" class="btn btn-default">Find Distance Between Points</button>
    </div>

    <div id="manage_drone_imagery_plot_polygons_load_div">
        <img src="/img/wheel.gif" />
    </div>

    <canvas id="drone_imagery_plot_polygons_original_stitched_div"></canvas>

    <div id="drone_imagery_generated_polygons_div"></div>

    <hr>
    <div class="well well-sm">
        <div id="drone_imagery_trial_layout_div"></div>
    </div>
</div>

<div id="manage_drone_imagery_calculate_phenotypes_div" style="display:none">

    <& /page/page_title.mas, title=>"Manage Aerial Imagery: Calculate Phenotypes" &>

    <div class="well well-sm">
        <ul>
            <li>Here you can calculate phenotypes for all plot polygons at once.</li>
        </ul>
    </div>

    <hr>
    <button class="btn btn-primary" id="drone_imagery_calculate_phenotypes_zonal_stats">Zonal Statistics</button>
    <button class="btn btn-primary" id="drone_imagery_calculate_phenotypes_sift">Calculate SIFT Features</button>
    <button class="btn btn-primary" id="drone_imagery_calculate_phenotypes_surf">Calculate SURF Features</button>
    <button class="btn btn-primary" id="drone_imagery_calculate_phenotypes_orb">Calculate ORB Features</button>
    <hr>

    <div id="manage_drone_imagery_calculate_phenotypes_show_zonal_stats" style="overflow:scroll"></div>
    <div id="manage_drone_imagery_calculate_phenotypes_show_fourier_transform" style="overflow:scroll"></div>
    <div id="manage_drone_imagery_calculate_phenotypes_show_sift"></div>
    <div id="manage_drone_imagery_calculate_phenotypes_show_surf"></div>
    <div id="manage_drone_imagery_calculate_phenotypes_show_orb"></div>

</div>

<div id="manage_drone_imagery_quality_control_div" style="display:none">

    <& /page/page_title.mas, title=>"Manage Aerial Imagery: Quality Control Plot Images" &>

    <div class="well well-sm">
        <ul>
            <li>Here you can obsolete plot images that are not correct.</li>
            <li>This is useful when using raw images because the process is more noisy.</li>
            <li>Clicking a checkbox will automatically obsolete the image!</li>
        </ul>
    </div>

    <div id="drone_imagery_quality_control_div"></div>
</div>

<div id="manage_drone_imagery_field_trial_time_series_div" style="display:none">

    <& /page/page_title.mas, title=>"Manage Aerial Imagery: Field Trial Image TimeSeries" &>

    <div id="manage_drone_imagery_field_trial_time_series_div_title"></div>

    <div class="well well-sm">
        <ul>
            <li>Here you can view the plot polygon templates on the imagery over the course of the field trial. All of the image bands are visible here (e.g. blue, green, RGB, etc).</li>
            <li>Click on a plot polygon to go to the plot detail page.</li>
            <li>You can zoom out on your browser (Cntrl + -).</li>
        </ul>
    </div>

    <div class="well well-sm">
        <div class="panel panel-default">
            <div class="panel-body">
                <div id="manage_drone_imagery_field_trial_time_series_times_div"></div>
                <div id="manage_drone_imagery_field_trial_time_series_image_type_div"></div>
            </div>
        </div>
    </div>

    <div id="manage_drone_imagery_field_trial_time_series_info_div"></div>
    <div id="manage_drone_imagery_field_trial_time_series_loading_div">
        <img src="/img/wheel.gif" />
    </div>
    <canvas id="manage_drone_imagery_field_trial_time_series_canvas_div"></canvas>

</div>

<div class="modal fade" id="manage_drone_imagery_field_trial_time_series_popup" name="manage_drone_imagery_field_trial_time_series_popup" tabindex="-1" role="dialog" aria-labelledby="droneImageryTImeSeriesHoverDialog" data-backdrop="static">
  <div class="modal-dialog modal-xl" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="droneImageryTImeSeriesHoverDialog">Plot Information</h4>
      </div>
      <div class="modal-body">
        <div class="container-fluid">
            <div id="manage_drone_imagery_field_trial_time_series_popup_content"></div>
            <div id="manage_drone_imagery_field_trial_time_series_popup_content_figure1"></div>
            <div id="manage_drone_imagery_field_trial_time_series_popup_content_figure2"></div>
            <div id="manage_drone_imagery_field_trial_time_series_popup_content_figure3"></div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<div id="manage_drone_imagery_loading_div" style="display:none">
    <& /page/page_title.mas, title=>"Loading..." &>
    <div class="well well-sm">
        <center>
        <h3>Please wait...</h3>
        <hr>
        <img src="/img/wheel.gif" />
        </center>
    </div>
</div>

<div class="modal fade" id="drone_imagery_assign_plot_dialog" name="drone_imagery_assign_plot_dialog" tabindex="-1" role="dialog" aria-labelledby="droneImageryAssignPlotDialog" data-backdrop="static">
  <div class="modal-dialog modal-sm" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="droneImageryAssignPlotDialog">Assign Plot</h4>
      </div>
      <div class="modal-body">
        <div class="container-fluid">
            <form class="form-horizontal" id="drone_imagery_assign_plot_form">
                <div class="form-group">
                    <label class="col-sm-5 control-label">Plot Name:</label>
                    <div class="col-sm-7">
                        <input class="form-control" id="drone_imagery_plot_polygon_assign_plot_name" name="drone_imagery_plot_polygons_autocomplete" type="text" placeholder="Auto-completes plot name..." />
                    </div>
                </div>
            </form>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary" id="drone_imagery_plot_polygon_assign_add">Assign Plot</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="drone_imagery_plot_polygon_remove_polygon" name="drone_imagery_plot_polygon_remove_polygon" tabindex="-1" role="dialog" aria-labelledby="droneImageryRemovePlotPolygonDialog" data-backdrop="static">
  <div class="modal-dialog modal-sm" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="droneImageryRemovePlotPolygonDialog">Remove Plot Polygon</h4>
      </div>
      <div class="modal-body">
        <div class="container-fluid">
            <form class="form-horizontal" id="drone_imagery_plot_polygon_remove_polygon_form">
                <div class="form-group">
                    <label class="col-sm-5 control-label">Polygon Identifier:</label>
                    <div class="col-sm-7">
                        <input class="form-control" id="drone_imagery_plot_polygon_remove_polygon_number" name="drone_imagery_plot_polygon_remove_polygon_number" type="number" placeholder="e.g. 3" />
                    </div>
                </div>
            </form>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary" id="drone_imagery_plot_polygon_remove_polygon_submit">Remove Plot Polygon</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="drone_imagery_merge_channels_dialog" name="drone_imagery_merge_channels_dialog" tabindex="-1" role="dialog" aria-labelledby="droneImageryMergeChannelsDialog" data-backdrop="static">
  <div class="modal-dialog modal-xl" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="droneImageryMergeChannelsDialog">Merge Imaging Event Bands Into Single 3-channel image</h4>
      </div>
      <div class="modal-body">
        <div class="container-fluid">
            <form class="form-horizontal" id="drone_imagery_merge_bands_form">
                <div class="form-group">
                    <label class="col-sm-5 control-label">First Band:</label>
                    <div class="col-sm-7">
                        <div id="drone_imagery_merge_bands_band1_select"></div>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-5 control-label">Second Band:</label>
                    <div class="col-sm-7">
                        <div id="drone_imagery_merge_bands_band2_select"></div>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-5 control-label">Third Band:</label>
                    <div class="col-sm-7">
                        <div id="drone_imagery_merge_bands_band3_select"></div>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-5 control-label">Merge Image Type:</label>
                    <div class="col-sm-7">
                        <select class="form-control" id="drone_run_merge_image_type" name="drone_run_merge_image_type">
                            <option value="">Select One</option>
                            <option value="BGR">BGR (Band 1 = Blue, Band 2 = Green, Band 3 = Red)</option>
                            <option value="NRN">NRN (Band 1 = NIR, Band 2 = Red, Band 3 = NIR)</option>
                            <option value="NReN">NReN (Band 1 = NIR, Band 2 = Red Edge, Band 3 = NIR)</option>
                        </select>
                    </div>
                </div>
            </form>
        </div>

        <ul>
            <li>TGI = {GREEN band2} - 0.39*{RED band3} - 0.61*{BLUE band1}</li>
            <li>VARI = ( {GREEN band2} - {RED band3} ) / ( {GREEN band2} + {RED band3} - {BLUE band1} )</li>
            <li>NDVI = ( {NIR band1} - {RED band 2} ) / ( {NIR band1} + {RED band2} )</li>
            <li>NDRE = ( {NIR band1} - {RED EDGE band 2} ) / ( {NIR band1} + {RED EDGE band2} )</li>
        </ul>

      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary" id="drone_imagery_merge_bands_submit">Merge Bands</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="drone_imagery_calc_phenotypes_zonal_channel_dialog" name="drone_imagery_calc_phenotypes_zonal_channel_dialog" tabindex="-1" role="dialog" aria-labelledby="droneImageryCalcPhenotypesZonalChannelDialog" data-backdrop="static">
  <div class="modal-dialog modal-xl" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="droneImageryCalcPhenotypesZonalChannelDialog">Select the Channel to Calculate Zonal Statistics On</h4>
      </div>
      <div class="modal-body">
          <div class="container-fluid">
              <div id="drone_imagery_calculate_phenotypes_zonal_stats_week_term_div"></div>
          </div>

      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary" id="drone_imagery_calculate_phenotypes_zonal_stats_channel_select">Calculate Zonal Statistics</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="drone_imagery_delete_drone_run_dialog" name="drone_imagery_delete_drone_run_dialog" tabindex="-1" role="dialog" aria-labelledby="droneImageryDeleteDroneRunDialog" data-backdrop="static">
  <div class="modal-dialog modal-xl" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="droneImageryDeleteDroneRunDialog">Delete a Imaging Event</h4>
      </div>
      <div class="modal-body">
        <div class="container-fluid">
            <div class="well">
                <ul>
                    <li>Deleting an imaging event will remove the imaging event and all image bands permanently.</li>
                    <li>All images in the imaging event will be deleted (obsoleted).</li>
                    <li>Phenotypes that were generated for plots in this imaging event will be deleted permanently.</li>
                </ul>
            </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary" id="drone_imagery_delete_drone_run_confirm">Delete Imaging Event</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="drone_imagery_calc_phenotypes_trial_dialog" name="drone_imagery_calc_phenotypes_trial_dialog" tabindex="-1" role="dialog" aria-labelledby="droneImageryCalcPhenotypesZonalChannelTrialDialog" data-backdrop="static">
  <div class="modal-dialog modal-xl" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="droneImageryCalcPhenotypesZonalChannelTrialDialog">Calculate Zonal Statistics Again</h4>
      </div>
      <div class="modal-body">
        <div class="well well-sm">
            <div class="container-fluid">
                <div id="drone_imagery_week_term_div"></div>
            </div>
        </div>

        <div class="well well-sm">
            <div class="form-horizontal">
                <div class="form-group form-group-sm">
                    <label class="col-sm-5 control-label">Phenotype Process:</label>
                    <div class="col-sm-7">
                        <select class="form-control" id="drone_imagery_generate_phenotypes_process_type" name="drone_imagery_generate_phenotypes_process_type">
                            <option value="minimal,minimal_vi">Minimal</option>
                            <!-option value="extended">Extended</option-->
                        </select>
                    </div>
                </div>
                <div class="form-group form-group-sm">
                    <label class="col-sm-5 control-label">Phenotype Plot-Polygon Margin on Top and Bottom:</label>
                    <div class="col-sm-7">
                        <input class="form-control" type="number" id="drone_imagery_generate_phenotypes_process_margin_top_bottom" name="drone_imagery_generate_phenotypes_process_margin_top_bottom" value=5 />
                    </div>
                </div>
                <div class="form-group form-group-sm">
                    <label class="col-sm-5 control-label">Phenotype Plot-Polygon Margin on Left and Right:</label>
                    <div class="col-sm-7">
                        <input class="form-control" type="number" id="drone_imagery_generate_phenotypes_process_margin_left_right" name="drone_imagery_generate_phenotypes_process_margin_left_right" value=5 />
                    </div>
                </div>
            </div>
        </div>

        <div id="drone_imagery_generate_phenotypes_process_preview_svg_div"><div class="well well-sm"><p>LOADING... Please wait...</p></div></div>

      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary" id="drone_imagery_calculate_phenotypes_zonal_stats_trial_select">Calculate Zonal Statistics</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="drone_imagery_minimal_vi_standard_process_dialog" name="drone_imagery_minimal_vi_standard_process_dialog" tabindex="-1" role="dialog" aria-labelledby="droneImageryMinimalVIStandardProcessDialog" data-backdrop="static">
  <div class="modal-dialog modal-xl" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="droneImageryMinimalVIStandardProcessDialog">Run Minimal Vegetative Index Standard Process</h4>
      </div>
      <div class="modal-body">
        <div class="container-fluid">
            <div id="drone_imagery_minimal_vi_standard_process_week_term_div"></div>
        </div>

      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary" id="drone_imagery_minimal_vi_standard_process_select">Run Minimal Vegetative Index Standard Process</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="drone_imagery_extended_standard_process_dialog" name="drone_imagery_extended_standard_process_dialog" tabindex="-1" role="dialog" aria-labelledby="droneImageryExtenededStandardProcessDialog" data-backdrop="static">
  <div class="modal-dialog modal-xl" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="droneImageryExtenededStandardProcessDialog">Run Extended Standard Process</h4>
      </div>
      <div class="modal-body">
        <div class="container-fluid">
            <div id="drone_imagery_extended_standard_process_week_term_div"></div>
        </div>

      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary" id="drone_imagery_extended_standard_process_select">Run Extended Standard Process</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="drone_imagery_apply_other_vi_dialog" name="drone_imagery_apply_other_vi_dialog" tabindex="-1" role="dialog" aria-labelledby="droneImageryApplyOtherVIDialog" data-backdrop="static">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="droneImageryApplyOtherVIDialog">Apply Other Available Vegetation Indices</h4>
      </div>
      <div class="modal-body">
        <div class="container-fluid">
            <div id="drone_imagery_apply_other_vi_div"></div>
        </div>

      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary" id="drone_imagery_apply_other_vi_select">Run Selected Vegetation Indices</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="drone_imagery_associated_field_trials_dialog" name="drone_imagery_associated_field_trials_dialog" tabindex="-1" role="dialog" aria-labelledby="droneImageryAssociatedFieldTrialsDialog" data-backdrop="static">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="droneImageryAssociatedFieldTrialsDialog">Associated Field Trials</h4>
      </div>
      <div class="modal-body">
        <div class="container-fluid">
            <div id="drone_imagery_associated_field_trials_div"></div>
        </div>

      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary" id="drone_imagery_associated_field_trials_select_submit">Save Associated Field Trials</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="drone_imagery_download_phenotypes_dialog" name="drone_imagery_download_phenotypes_dialog" tabindex="-1" role="dialog" aria-labelledby="droneImageryDownloadPhenotypesDialog" data-backdrop="static">
  <div class="modal-dialog modal-xl" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="droneImageryDownloadPhenotypesDialog">Download drone image phenotypes and plot images</h4>
      </div>
      <div class="modal-body">
        <div class="container-fluid">

            <&| /util/workflow.mas, id=> "drone_imagery_download_phenotypes_workflow" &>
                <&| /util/workflow.mas:step, title=> "Field Trial" &>
                    <& /page/page_title.mas, title=>"Select the field trial you are interested in" &>
                    <br/><br/>
                    <form class="form-horizontal">
                        <div class="form-group">
                            <label class="col-sm-3 control-label">Field Trial: </label>
                            <div class="col-sm-9" >
                                <div id="drone_imagery_download_phenotypes_trial_select_div"></div>
                            </div>
                        </div>
                    </form>
                    <center>
                    <button class="btn btn-primary" id="drone_imagery_download_phenotypes_field_trial_select_step">Go to Next Step</button>
                    </center>
                </&>
                <&| /util/workflow.mas:step, title=> "Trait Selection" &>
                    <& /page/page_title.mas, title=>"Select the observation variable(s) you are interested in downloading" &>
                    <br/><br/>
                    <form class="form-horizontal">
                        <div class="form-group">
                            <label class="col-sm-3 control-label">Observation Variables Phenotyped in the Selected Field Trial: </label>
                            <div class="col-sm-9" >
                                <div id="drone_imagery_download_phenotypes_trait_select_div"></div>
                            </div>
                        </div>
                    </form>
                    <center>
                    <button class="btn btn-primary" id="drone_imagery_download_phenotypes_trait_select_step">Go to Next Step</button>
                    </center>
                </&>
                <&| /util/workflow.mas:step, title=> "Image Types" &>
                    <& /page/page_title.mas, title=>"Select the image type(s) you are interested in downloading" &>
                    <br/><br/>
                    <form class="form-horizontal">
                        <div class="form-group">
                            <label class="col-sm-3 control-label">Plot Image Types in the Selected Field Trial: </label>
                            <div class="col-sm-9" >
                                <div id="drone_imagery_download_phenotypes_image_type_select_div"></div>
                            </div>
                        </div>
                    </form>
                    <center>
                    <button class="btn btn-primary" id="drone_imagery_download_phenotypes_image_type_select_step">Go to Next Step</button>
                    </center>
                </&>
                <&| /util/workflow.mas:step, title=> "Download" &>
                    <& /page/page_title.mas, title=>"Download!" &>

                    <div id ="drone_imagery_download_phenotypes_file_div">
                    </div>

                    <br/><br/>
                    <center>
                    <button class="btn btn-primary" id="drone_imagery_download_phenotypes_confirm_step">Submit</button>
                    </center>
                </&>
            </&>

        </div>

      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="drone_imagery_keras_cnn_dialog" name="drone_imagery_keras_cnn_dialog" tabindex="-1" role="dialog" aria-labelledby="droneImageryKerasCNNDialog" data-backdrop="static">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="droneImageryKerasCNNDialog">Train and Predict Using Keras CNN Model</h4>
      </div>
      <div class="modal-body">
        <div class="container-fluid">
            <button class="btn btn-primary" id="drone_imagery_keras_cnn_train_link">Train Keras CNN Model Using Images and Phenotypes In Database</button>
            <br/><br/>
            <button class="btn btn-primary" id="drone_imagery_keras_cnn_predict_link">Predict Phenotypes Using Images and Trained Keras Model CNN</button>
            <br/><br/>
            <button class="btn btn-primary" id="drone_imagery_keras_cnn_autoencoder_vegetation_indices_link">Calculate NDVI and NDRE from Keras CNN Autoencoder Model</button>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="drone_imagery_train_keras_cnn_dialog" name="drone_imagery_train_keras_cnn_dialog" tabindex="-1" role="dialog" aria-labelledby="droneImageryTrainKerasCNNDialog" data-backdrop="static">
  <div class="modal-dialog modal-xl" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="droneImageryTrainKerasCNNDialog">Train Keras CNN Model</h4>
      </div>
      <div class="modal-body">
        <div class="container-fluid">

            <&| /util/workflow.mas, id=> "drone_imagery_train_keras_model_workflow" &>
                <&| /util/workflow.mas:step, title=> "Intro" &>
                    <& /page/page_title.mas, title=>"This workflow will guide you through training a keras model using images and phenotypes in the database." &>
                    <br/><br/>
                    <center>
                    <button class="btn btn-primary" onclick="Workflow.complete(this); return false;">Go to Next Step</button>
                    </center>
                </&>
                <&| /util/workflow.mas:step, title=> "Field Trial(s)" &>
                    <& /page/page_title.mas, title=>"Select the field trial(s) you are interested in" &>
                    <br/><br/>
                    <form class="form-horizontal">
                        <div class="form-group">
                            <label class="col-sm-3 control-label">Field Trial(s): </label>
                            <div class="col-sm-9" >
                                <div id="drone_imagery_train_keras_cnn_trial_select_div"></div>
                            </div>
                        </div>
                    </form>
                    <br/><br/>
                    <center>
                    <button class="btn btn-primary" id="drone_imagery_train_keras_model_field_trial_select_step">Go to Next Step</button>
                    </center>
                </&>
                <&| /util/workflow.mas:step, title=> "Trait Selection" &>
                    <& /page/page_title.mas, title=>"Select the trait you are interested in predicting" &>
                    <br/><br/>
                    <form class="form-horizontal">
                        <div class="form-group">
                            <label class="col-sm-3 control-label">Trait Phenotyped in the Selected Field Trial(s) To Predict: </label>
                            <div class="col-sm-9" >
                                <div id="drone_imagery_train_keras_cnn_trait_select_div"></div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-3 control-label">Traits Phenotyped in the Selected Field Trial(s) As Auxiliary Trait(s): </label>
                            <div class="col-sm-9" >
                                <div id="drone_imagery_train_keras_cnn_aux_trait_select_div"></div>
                            </div>
                        </div>
                    </form>
                    <br/><br/><br/>
                    <center>
                    <button class="btn btn-primary" id="drone_imagery_train_keras_model_trait_select_step">Go to Next Step</button>
                    </center>
                </&>
                <&| /util/workflow.mas:step, title=> "Population Selection" &>
                    <& /page/page_title.mas, title=>"Select the population(s) you are specifically interested in predicting. Leave blank if you want to train on images from all germplasm in the selected field trial(s)." &>
                    <br/><br/>
                    <form class="form-horizontal">
                        <div class="form-group">
                            <label class="col-sm-5 control-label">Population(s) to include in training (Leave blank to include images from all germplasm in the selected field trials): </label>
                            <div class="col-sm-7" >
                                <div id="drone_imagery_train_keras_cnn_population_select_div"></div>
                            </div>
                        </div>
                    </form>
                    <br/><br/><br/>
                    <center>
                    <button class="btn btn-primary" id="drone_imagery_train_keras_model_population_select_step">Go to Next Step</button>
                    </center>
                </&>
                <&| /util/workflow.mas:step, title=> "Imaging Event Selection" &>
                    <& /page/page_title.mas, title=>"Select the imaging event(s) you are interested in using in the model" &>

                    <table class="table table-bordered table-hover" id="drone_image_train_keras_drone_runs_table">
                        <thead>
                            <tr>
                                <th>Select <br/><input type="checkbox" id="drone_image_train_keras_drone_runs_table_select_all" checked>Select All</th>
                                <th>Imaging Event Name</th>
                                <th>Imaging Event Type</th>
                                <th>Description</th>
                                <th>Imaging Event Date</th>
                                <th>Imaging Event GDD</th>
                                <th>Camera Type</th>
                                <th>Field Trial Name</th>
                                <th>Field Trial Description</th>
                            </tr>
                        </thead>
                    </table>

                    <br/><br/>
                    <center>
                    <button class="btn btn-primary" id="drone_imagery_train_keras_model_drone_run_select_step">Go to Next Step</button>
                    </center>
                </&>
                <&| /util/workflow.mas:step, title=> "Images Selection" &>
                    <& /page/page_title.mas, title=>"Select the types of images you are interested in using in the model" &>

                    <table class="table table-bordered table-hover" id="drone_image_train_keras_plot_polygon_image_type_table">
                        <thead>
                            <tr>
                                <!--th>Select <br/><input type="checkbox" id="drone_image_train_keras_plot_polygon_image_type_table_select_all" checked>Select All</th-->
                                <th>Select</th>
                                <th>Field Trial</th>
                                <th>Imaging Event Name</th>
                                <th>Imaging Event Band Name</th>
                                <th>Imaging Event Band Type</th>
                                <th>Plot Polygon Type</th>
                                <th>Number of Images</th>
                            </tr>
                        </thead>
                    </table>

                    <br/><br/>
                    <center>
                    <button class="btn btn-primary" id="drone_imagery_train_keras_model_plot_polygon_type_select_step">Go to Next Step</button>
                    </center>
                </&>
                <&| /util/workflow.mas:step, title=> "Confirm" &>
                    <& /page/page_title.mas, title=>"Train the model!" &>

                    <br/><br/>
                    <div class="form-horizontal">
                        <div class="form-group">
                            <label class="col-sm-4 control-label">Model Type: </label>
                            <div class="col-sm-8" >
                                <select class="form-control" id="drone_image_train_keras_model_type" name="drone_image_train_keras_model_type" >
                                    <option value="KerasCNNSequentialSoftmaxCategorical">Keras CNN Sequential 16-32-64-128-512 Linear Regression</option>
                                    <option value="KerasCNNMLPExample">Keras CNN and MLP Example</option>
                                    <option value="SimpleKerasTunerCNNSequentialSoftmaxCategorical">Simple Keras Tuner CNN Sequential 16-32-64-128-512 Linear Regression</option>
                                    <option value="KerasTunerCNNSequentialSoftmaxCategorical">Keras Tuner CNN Sequential 16-32-64-128-512 Linear Regression</option>
                                    <option value="KerasCNNInceptionResNetV2">Keras CNN InceptionResNetV2 Linear Regression</option>
                                    <option value="KerasCNNLSTMDenseNet121ImageNetWeights">Keras LSTM DenseNet121 ImageNet Weights Linear Regression</option>
                                    <option value="KerasCNNInceptionResNetV2ImageNetWeights">Keras CNN Pre-Trained InceptionResNetV2 ImageNet Weights Linear Regression</option>
                                    <option value="KerasCNNDenseNet121ImageNetWeights">Keras DenseNet121 ImageNet Weights Linear Regression</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-4 control-label">Model Name: </label>
                            <div class="col-sm-8" >
                                <input class="form-control" type="text" id="drone_image_train_keras_model_name" name="drone_image_train_keras_model_name" />
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-4 control-label">Model Description: </label>
                            <div class="col-sm-8" >
                                <input class="form-control" type="text" id="drone_image_train_keras_model_desc" name="drone_image_train_keras_model_desc" />
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-4 control-label">Genotyping Protocol for GRM: </label>
                            <div class="col-sm-8" >
                                <div id="drone_image_train_keras_model_genotyping_protocol_div"></div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-4 control-label">Use Parents of Accessions For In-silico Hybrid: </label>
                            <div class="col-sm-8" >
                                <select class="form-control" id="drone_image_train_keras_model_use_parents_grm" name="drone_image_train_keras_model_use_parents_grm" >
                                    <option value="yes">Yes, GRM for parents of accessions if genotyped</option>
                                    <option value="no">No, GRM for accessions if genotyped</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <br/><br/>
                    <center>
                    <button class="btn btn-primary" id="drone_imagery_train_keras_model_confirm_step">Train and Save Keras CNN Model</button>
                    </center>

                    <div id="drone_imagery_train_keras_model_results_div">
                    </div>
                </&>
            </&>

        </div>

      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="drone_imagery_predict_keras_cnn_dialog" name="drone_imagery_predict_keras_cnn_dialog" tabindex="-1" role="dialog" aria-labelledby="droneImageryPredictKerasCNNDialog" data-backdrop="static">
  <div class="modal-dialog modal-xl" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="droneImageryPredictKerasCNNDialog">Predict Phenotypes Using Trained Keras CNN Model</h4>
      </div>
      <div class="modal-body">
        <div class="container-fluid">

            <&| /util/workflow.mas, id=> "drone_imagery_predict_keras_model_workflow" &>
                <&| /util/workflow.mas:step, title=> "Intro" &>
                    <& /page/page_title.mas, title=>"This workflow will guide you through predicting phenotypes from trained Kera CNN Models and images in the database." &>
                    <br/><br/>
                    <center>
                    <button class="btn btn-primary" onclick="Workflow.complete(this); return false;">Go to Next Step</button>
                    </center>
                </&>
                <&| /util/workflow.mas:step, title=> "Field Trial" &>
                    <& /page/page_title.mas, title=>"Select the field trial(s) you are interested in sourcing images from for prediction" &>
                    <br/><br/>
                    <form class="form-horizontal">
                        <div class="form-group">
                            <label class="col-sm-3 control-label">Field Trial: </label>
                            <div class="col-sm-9" >
                                <div id="drone_imagery_predict_keras_cnn_trial_select_div"></div>
                            </div>
                        </div>
                    </form>
                    <br/><br/>
                    <center>
                    <button class="btn btn-primary" id="drone_imagery_predict_keras_model_field_trial_select_step">Go to Next Step</button>
                    </center>
                </&>
                <&| /util/workflow.mas:step, title=> "Keras CNN Model Selection" &>
                    <& /page/page_title.mas, title=>"Select the Keras CNN Model for prediction" &>

                    <br/><br/>
                    <form class="form-horizontal">
                        <div class="form-group">
                            <label class="col-sm-3 control-label">Trained Keras CNN Model: </label>
                            <div class="col-sm-9" >
                                <div id="drone_imagery_predict_keras_cnn_model_select_div"></div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-3 control-label">Traits Phenotyped in the Selected Field Trial(s) As Auxiliary Trait(s) (Currently Only For Mixed MLP/CNN Model): </label>
                            <div class="col-sm-9" >
                                <div id="drone_imagery_predict_keras_cnn_aux_trait_select_div"></div>
                            </div>
                        </div>
                    </form>
                    <br/><br/>

                    <center>
                    <button class="btn btn-primary" id="drone_imagery_predict_keras_model_select_step">Go to Next Step</button>
                    </center>
                </&>
                <&| /util/workflow.mas:step, title=> "Population Selection" &>
                    <& /page/page_title.mas, title=>"Select the population(s) you are specifically interested in predicting. Leave blank if you want to train on images from all germplasm in the selected field trial(s)." &>
                    <br/><br/>
                    <form class="form-horizontal">
                        <div class="form-group">
                            <label class="col-sm-5 control-label">Population(s) to include in training (Leave blank to include images from all germplasm in the selected field trials): </label>
                            <div class="col-sm-7" >
                                <div id="drone_imagery_predict_keras_cnn_population_select_div"></div>
                            </div>
                        </div>
                    </form>
                    <br/><br/><br/>
                    <center>
                    <button class="btn btn-primary" id="drone_imagery_predict_keras_model_population_select_step">Go to Next Step</button>
                    </center>
                </&>
                <&| /util/workflow.mas:step, title=> "Imaging Event Selection" &>
                    <& /page/page_title.mas, title=>"Select the imaging event(s) you are interested in sourcing images from for prediction" &>

                    <table class="table table-bordered table-hover" id="drone_image_predict_keras_drone_runs_table">
                        <thead>
                            <tr>
                                <th>Select <br/><input type="checkbox" id="drone_image_predict_keras_drone_runs_table_select_all" checked>Select All</th>
                                <th>Imaging Event Name</th>
                                <th>Imaging Event Type</th>
                                <th>Description</th>
                                <th>Imaging Event Date</th>
                                <th>Imaging Event GDD</th>
                                <th>Camera Type</th>
                                <th>Field Trial Name</th>
                                <th>Field Trial Description</th>
                            </tr>
                        </thead>
                    </table>

                    <br/><br/>
                    <center>
                    <button class="btn btn-primary" id="drone_imagery_predict_keras_model_drone_run_select_step">Go to Next Step</button>
                    </center>
                </&>
                <&| /util/workflow.mas:step, title=> "Images Selection" &>
                    <& /page/page_title.mas, title=>"Select the types of images you are interested sourcing images from for prediction" &>

                    <table class="table table-bordered table-hover" id="drone_image_predict_keras_plot_polygon_image_type_table">
                        <thead>
                            <tr>
                                <!--th>Select <br/><input type="checkbox" id="drone_image_predict_keras_plot_polygon_image_type_table_select_all" checked>Select All</th-->
                                <th>Select</th>
                                <th>Field Trial</th>
                                <th>Imaging Event Name</th>
                                <th>Imaging Event Band Name</th>
                                <th>Imaging Event Band Type</th>
                                <th>Plot Polygon Type</th>
                                <th>Number of Images</th>
                            </tr>
                        </thead>
                    </table>

                    <br/><br/>
                    <center>
                    <button class="btn btn-primary" id="drone_imagery_predict_keras_model_plot_polygon_type_select_step">Go to Next Step</button>
                    </center>
                </&>
                <&| /util/workflow.mas:step, title=> "Confirm" &>
                    <& /page/page_title.mas, title=>"Predict Phenotypes!" &>
                    <br/><br/>
                    <form class="form-horizontal">
                        <div class="form-group">
                            <label class="col-sm-3 control-label">Prediction Model: </label>
                            <div class="col-sm-9" >
                                <select class="form-control" id="drone_imagery_keras_model_prediction_select">
                                    <option value="standard_cnn">Standard CNN Prediction</option>
                                    <option value="cnn_prediction_mixed_model">CNN Prediction For Mixed Model Prediction</option>
                                </select>
                            </div>
                        </div>
                    </form>

                    <div id="drone_imagery_keras_model_prediction_cnn_prediction_mixed_model_div" style="display:none">
                        $$y_t = \beta_{CNN,pred} + rep + 1|\mbox{GermplasmName}$$
                    </div>
                    <br/><br/>

                    <center>
                    <button class="btn btn-primary" id="drone_imagery_predict_keras_model_confirm_step">Submit</button>
                    </center>

                    <div id="drone_imagery_predict_keras_model_results_div">
                    </div>
                </&>
            </&>

        </div>

      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="drone_imagery_keras_cnn_autoencoder_vi_dialog" name="drone_imagery_keras_cnn_autoencoder_vi_dialog" tabindex="-1" role="dialog" aria-labelledby="droneImageryAutoencoderKerasCNNVIDialog" data-backdrop="static">
  <div class="modal-dialog modal-xl" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="droneImageryAutoencoderKerasCNNVIDialog">NDVI and NDRE from autoencoder Keras CNN</h4>
      </div>
      <div class="modal-body">
        <div class="container-fluid">

            <&| /util/workflow.mas, id=> "drone_imagery_autoencoder_keras_model_vi_workflow" &>
                <&| /util/workflow.mas:step, title=> "Intro" &>
                    <& /page/page_title.mas, title=>"This workflow will guide you through extracted NDVI and NDRE values for autoencoder Keras CNN." &>
                    <br/><br/>
                    <center>
                    <button class="btn btn-primary" onclick="Workflow.complete(this); return false;">Go to Next Step</button>
                    </center>
                </&>
                <&| /util/workflow.mas:step, title=> "Field Trial Training" &>
                    <& /page/page_title.mas, title=>"Select the field trial(s) you are interested in sourcing images from for training" &>
                    <br/><br/>
                    <form class="form-horizontal">
                        <div class="form-group">
                            <label class="col-sm-3 control-label">Field Trial: </label>
                            <div class="col-sm-9" >
                                <div id="drone_imagery_autoencoder_keras_cnn_vi_trial_training_select_div"></div>
                            </div>
                        </div>
                    </form>
                    <br/><br/>
                    <center>
                    <button class="btn btn-primary" id="drone_imagery_autoencoder_keras_vi_model_field_trial_training_select_step">Go to Next Step</button>
                    </center>
                </&>
                <&| /util/workflow.mas:step, title=> "Training" &>
                    <& /page/page_title.mas, title=>"Select the imaging event(s) you are interested in sourcing images from for training" &>

                    <table class="table table-bordered table-hover" id="drone_image_autoencoder_keras_vi_drone_runs_training_table">
                        <thead>
                            <tr>
                                <th>Select <br/><input type="checkbox" id="drone_image_autoencoder_keras_vi_drone_runs_training_table_select_all" checked>Select All</th>
                                <th>Imaging Event Name</th>
                                <th>Imaging Event Type</th>
                                <th>Description</th>
                                <th>Imaging Event Date</th>
                                <th>Imaging Event GDD</th>
                                <th>Camera Type</th>
                                <th>Field Trial Name</th>
                                <th>Field Trial Description</th>
                            </tr>
                        </thead>
                    </table>

                    <br/><br/>
                    <center>
                    <button class="btn btn-primary" id="drone_imagery_autoencoder_keras_vi_model_drone_run_training_select_step">Go to Next Step</button>
                    </center>
                </&>
                <&| /util/workflow.mas:step, title=> "Images Training" &>
                    <& /page/page_title.mas, title=>"Select the types of images you are interested sourcing images from for training" &>

                    <table class="table table-bordered table-hover" id="drone_image_autoencoder_keras_vi_plot_polygon_image_type_training_table">
                        <thead>
                            <tr>
                                <!--th>Select <br/><input type="checkbox" id="drone_image_autoencoder_keras_vi_plot_polygon_image_type_training_table_select_all" checked>Select All</th-->
                                <th>Select</th>
                                <th>Field Trial</th>
                                <th>Imaging Event Name</th>
                                <th>Imaging Event Band Name</th>
                                <th>Imaging Event Band Type</th>
                                <th>Plot Polygon Type</th>
                                <th>Number of Images</th>
                            </tr>
                        </thead>
                    </table>

                    <br/><br/>
                    <center>
                    <button class="btn btn-primary" id="drone_imagery_autoencoder_keras_vi_model_plot_polygon_type_training_select_step">Go to Next Step</button>
                    </center>
                </&>
                <&| /util/workflow.mas:step, title=> "Field Trial Prediction" &>
                    <& /page/page_title.mas, title=>"Select the field trial(s) you are interested in sourcing images from for prediction" &>
                    <br/><br/>
                    <form class="form-horizontal">
                        <div class="form-group">
                            <label class="col-sm-3 control-label">Field Trial: </label>
                            <div class="col-sm-9" >
                                <div id="drone_imagery_autoencoder_keras_cnn_vi_trial_select_div"></div>
                            </div>
                        </div>
                    </form>
                    <br/><br/>
                    <center>
                    <button class="btn btn-primary" id="drone_imagery_autoencoder_keras_vi_model_field_trial_select_step">Go to Next Step</button>
                    </center>
                </&>
                <&| /util/workflow.mas:step, title=> "Prediction" &>
                    <& /page/page_title.mas, title=>"Select the imaging event(s) you are interested in sourcing images from for prediction" &>

                    <table class="table table-bordered table-hover" id="drone_image_autoencoder_keras_vi_drone_runs_table">
                        <thead>
                            <tr>
                                <th>Select <br/><input type="checkbox" id="drone_image_autoencoder_keras_vi_drone_runs_table_select_all" checked>Select All</th>
                                <th>Imaging Event Name</th>
                                <th>Imaging Event Type</th>
                                <th>Description</th>
                                <th>Imaging Event Date</th>
                                <th>Imaging Event GDD</th>
                                <th>Camera Type</th>
                                <th>Field Trial Name</th>
                                <th>Field Trial Description</th>
                            </tr>
                        </thead>
                    </table>

                    <br/><br/>
                    <center>
                    <button class="btn btn-primary" id="drone_imagery_autoencoder_keras_vi_model_drone_run_select_step">Go to Next Step</button>
                    </center>
                </&>
                <&| /util/workflow.mas:step, title=> "Images Prediction" &>
                    <& /page/page_title.mas, title=>"Select the types of images you are interested sourcing images from for prediction" &>

                    <table class="table table-bordered table-hover" id="drone_image_autoencoder_keras_vi_plot_polygon_image_type_table">
                        <thead>
                            <tr>
                                <!--th>Select <br/><input type="checkbox" id="drone_image_autoencoder_keras_vi_plot_polygon_image_type_table_select_all" checked>Select All</th-->
                                <th>Select</th>
                                <th>Field Trial</th>
                                <th>Imaging Event Name</th>
                                <th>Imaging Event Band Name</th>
                                <th>Imaging Event Band Type</th>
                                <th>Plot Polygon Type</th>
                                <th>Number of Images</th>
                            </tr>
                        </thead>
                    </table>

                    <br/><br/>
                    <center>
                    <button class="btn btn-primary" id="drone_imagery_autoencoder_keras_vi_model_plot_polygon_type_select_step">Go to Next Step</button>
                    </center>
                </&>
                <&| /util/workflow.mas:step, title=> "Confirm" &>
                    <& /page/page_title.mas, title=>"Calculate NDVI and NDRE Autoencoder Phenotypes" &>
                    <br/><br/>
                    <form class="form-horizontal">
                        <div class="form-group">
                            <label class="col-sm-3 control-label">Autoencoder Model: </label>
                            <div class="col-sm-9" >
                                <select class="form-control" id="drone_imagery_keras_model_autoencoder_vi_select">
                                    <option value="keras_autoencoder_64_32_filters_16_latent">Keras Autoencoder</option>
                                </select>
                            </div>
                        </div>
                    </form>

                    <center>
                    <button class="btn btn-primary" id="drone_imagery_autoencoder_keras_vi_model_confirm_step">Submit</button>
                    </center>

                    <div id="drone_imagery_autoencoder_keras_vi_model_results_div">
                    </div>
                </&>
            </&>

        </div>

      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="drone_imagery_standard_process_complete_dialog" name="drone_imagery_standard_process_complete_dialog" tabindex="-1" role="dialog" aria-labelledby="droneImageryStandardProcessCompleteDialog" data-backdrop="static">
  <div class="modal-dialog modal-xl" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="droneImageryStandardProcessCompleteDialog">Standard Process Complete</h4>
      </div>
      <div class="modal-body">
        <div class="container-fluid">
            <p>
                <span class="ui-icon ui-icon-circle-check" style="float: left; margin: 0 7px 50px 0;"></span>
                It will take time to finish processing your imaging event and calculating phenotypes for all plot polygon images, vegetative indices, and processing combinations. Once it is complete, the "Processing Icon" on the Manage->Aerial Imagery page will disappear for the imaging event.
            </p>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary" data-dismiss="modal">Finish</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="drone_imagery_plot_polygon_template_options_dialog" name="drone_imagery_plot_polygon_template_options_dialog" tabindex="-1" role="dialog" aria-labelledby="droneImageryPlotPolygonTemplateDialog" data-backdrop="static">
  <div class="modal-dialog modal-xl" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="droneImageryPlotPolygonTemplateDialog">Plot Template Options</h4>
      </div>
      <div class="modal-body">
        <div class="container-fluid">
            <&| /page/info_section.mas, title => 'Copy/Paste Template', collapsible=>1, collapsed => 0, subtitle=> 'Copy/Paste this template onto the image.' &>
                <button class="btn btn-primary" id="drone_imagery_plot_polygon_template_options_paste_click">Click To Paste</button>
            </&>
            <&| /page/info_section.mas, title => 'Delete Template', collapsible=>1, collapsed => 0, subtitle=> 'Remove this template.' &>
                <button class="btn btn-danger" id="drone_imagery_plot_polygon_template_options_remove_click">Click To Remove</button>
            </&>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="drone_imagery_calculate_gdd_dialog" name="drone_imagery_calculate_gdd_dialog" tabindex="-1" role="dialog" aria-labelledby="droneImageryCalculateGDDDialog" data-backdrop="static">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="droneImageryCalculateGDDDialog">Calculate Growing Degree Days</h4>
      </div>
      <div class="modal-body">
        <div class="container-fluid">
            <div class="well well-sm">
                Growing Degree Days (GDD) are calculated using the average high and low temperature for each day from planting date to the date of the imaging event. <a href="https://www.canr.msu.edu/news/understanding_growing_degree_days" target=_blank >More Information on GDD</a>. The average daily high and low temperature is fetched from the <a href="https://www.ncdc.noaa.gov/cdo-web/webservices/v2" target=_blank>NOAA NCDC</a>.
            </div>

            <div id="drone_imagery_calculate_gdd_time_div"></div>

            <div class="form-horizontal">
                <div class="form-group">
                    <label class="col-sm-3 control-label">Base Temperature:</label>
                    <div class="col-sm-9" >
                        <select class="form-control" id="drone_imagery_calculate_gdd_base_temperature_input">
                            <option value="">Select One</option>
                            <option value="10">10F</option>
                            <option value="11">11F</option>
                            <option value="12">12F</option>
                            <option value="13">13F</option>
                            <option value="14">14F</option>
                            <option value="15">15F</option>
                            <option value="16">16F</option>
                            <option value="17">17F</option>
                            <option value="18">18F</option>
                            <option value="19">19F</option>
                            <option value="20">20F</option>
                            <option value="21">21F</option>
                            <option value="22">22F</option>
                            <option value="23">23F</option>
                            <option value="24">24F</option>
                            <option value="25">25F</option>
                            <option value="26">26F</option>
                            <option value="27">27F</option>
                            <option value="28">28F</option>
                            <option value="29">29F</option>
                            <option value="30">30F</option>
                            <option value="31">31F</option>
                            <option value="32">32F</option>
                            <option value="33">33F</option>
                            <option value="34">34F</option>
                            <option value="35">35F</option>
                            <option value="36">36F</option>
                            <option value="37">37F</option>
                            <option value="38">38F</option>
                            <option value="39">39F</option>
                            <option value="40">40F</option>
                            <option value="41">41F</option>
                            <option value="42">42F</option>
                            <option value="43">43F</option>
                            <option value="44">44F</option>
                            <option value="45">45F</option>
                            <option value="46">46F</option>
                            <option value="47">47F</option>
                            <option value="48">48F</option>
                            <option value="49">49F</option>
                            <option value="50">50F</option>
                            <option value="51">51F</option>
                            <option value="52">52F</option>
                            <option value="53">53F</option>
                            <option value="54">54F</option>
                            <option value="55">55F</option>
                            <option value="56">56F</option>
                            <option value="57">57F</option>
                            <option value="58">58F</option>
                            <option value="59">59F</option>
                            <option value="60">60F</option>
                            <option value="61">61F</option>
                            <option value="62">62F</option>
                            <option value="63">63F</option>
                            <option value="64">64F</option>
                            <option value="65">65F</option>
                            <option value="66">66F</option>
                            <option value="67">67F</option>
                            <option value="68">68F</option>
                            <option value="69">69F</option>
                            <option value="70">70F</option>
                            <option value="71">71F</option>
                            <option value="72">72F</option>
                            <option value="73">73F</option>
                            <option value="74">74F</option>
                            <option value="75">75F</option>
                            <option value="76">76F</option>
                            <option value="77">77F</option>
                            <option value="78">78F</option>
                            <option value="79">79F</option>
                            <option value="80">80F</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-3 control-label">Formula:</label>
                    <div class="col-sm-9" >
                        <select class="form-control" id="drone_imagery_calculate_gdd_formula_input">
                            <option value="average_daily_temp_sum">GDD = sum_over_days ( ( (Max Temp + Min Temp)/2 ) - Base Temp)</option>
                        </select>
                    </div>
                </div>
            </div>

        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-primary" id="drone_imagery_upload_gdd_submit">Calculate</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="drone_imagery_calculate_precipitation_dialog" name="drone_imagery_calculate_precipitation_dialog" tabindex="-1" role="dialog" aria-labelledby="droneImageryCalculatePrecipitationDialog" data-backdrop="static">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="droneImageryCalculatePrecipitationDialog">Calculate Precipitation Sum</h4>
      </div>
      <div class="modal-body">
        <div class="container-fluid">
            <div class="well well-sm">
                The average daily precipitation is fetched from the <a href="https://www.ncdc.noaa.gov/cdo-web/webservices/v2" target=_blank>NOAA NCDC</a>.
            </div>

            <div id="drone_imagery_calculate_precipitation_time_div"></div>

            <div class="form-horizontal">
                <div class="form-group">
                    <label class="col-sm-3 control-label">Formula:</label>
                    <div class="col-sm-9" >
                        <select class="form-control" id="drone_imagery_calculate_precipitation_sum_formula_input">
                            <option value="average_daily_precipitation_sum">Precipitation Sum = sum_over_days ( Average Daily Precipitation )</option>
                        </select>
                    </div>
                </div>
            </div>

        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-primary" id="drone_imagery_upload_precipitation_sum_submit">Calculate</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="drone_imagery_compare_images_dialog" name="drone_imagery_compare_images_dialog" tabindex="-1" role="dialog" aria-labelledby="droneImageryCompareImagesDialog" data-backdrop="static">
  <div class="modal-dialog modal-xl" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="droneImageryCompareImagesDialog">Compare Images</h4>
      </div>
      <div class="modal-body">
        <div class="container-fluid">

            <&| /util/workflow.mas, id=> "drone_imagery_compare_images_workflow" &>
                <&| /util/workflow.mas:step, title=> "Comparison" &>
                    <& /page/page_title.mas, title=>"Select the comparison you are interested in" &>
                    <form class="form-horizontal">
                        <div class="form-group">
                            <label class="col-sm-3 control-label">Comparison: </label>
                            <div class="col-sm-9" >
                                <select id="drone_imagery_compare_images_comparison_select" class="form-control">
                                    <option value="compare_pixel_values_two_images">Compare pixel values for two different aerial field images</option>
                                </select>
                            </div>
                        </div>
                    </form>
                    <center>
                    <button class="btn btn-primary" id="drone_imagery_compare_images_comparison_select_step">Go to Next Step</button>
                    </center>
                </&>
                <&| /util/workflow.mas:step, title=> "Field Trial(s)" &>
                    <& /page/page_title.mas, title=>"Select the field trials you are interested in comparing" &>

                    <form class="form-horizontal">
                        <div class="form-group">
                            <label class="col-sm-3 control-label">Field Trial(s): </label>
                            <div class="col-sm-9" >
                                <div id="drone_imagery_compare_images_trial_select_div"></div>
                            </div>
                        </div>
                    </form>

                    <br/><br/>

                    <center>
                    <button class="btn btn-primary" id="drone_imagery_compare_images_field_trial_select_step">Go to Next Step</button>
                    </center>
                </&>
                <&| /util/workflow.mas:step, title=> "Imaging Event(s)" &>
                    <& /page/page_title.mas, title=>"Select the imaging events you are interested in comparing" &>

                    <table class="table table-bordered table-hover" id="drone_image_compare_images_drone_runs_table">
                        <thead>
                            <tr>
                                <th>Select</th>
                                <th>Imaging Event Name</th>
                                <th>Imaging Event Type</th>
                                <th>Description</th>
                                <th>Imaging Event Date</th>
                                <th>Imaging Event GDD</th>
                                <th>Camera Type</th>
                                <th>Field Trial Name</th>
                                <th>Field Trial Description</th>
                            </tr>
                        </thead>
                    </table>

                    <br/><br/>

                    <center>
                    <button class="btn btn-primary" id="drone_imagery_compare_images_drone_runs_select_step">Go to Next Step</button>
                    </center>
                </&>
                <&| /util/workflow.mas:step, title=> "Imaging Event Band(s)" &>
                    <& /page/page_title.mas, title=>"Select the imaging event bands you are interested in comparing" &>

                    <table class="table table-bordered table-hover" id="drone_image_compare_images_drone_run_bands_table">
                        <thead>
                            <tr>
                                <th>Select</th>
                                <th>Imaging Event Name</th>
                                <th>Imaging Event Type</th>
                                <th>Description</th>
                                <th>Imaging Event Date</th>
                                <th>Imaging Event GDD</th>
                                <th>Camera Type</th>
                                <th>Field Trial Name</th>
                                <th>Field Trial Description</th>
                            </tr>
                        </thead>
                    </table>

                    <br/><br/>

                    <center>
                    <button class="btn btn-primary" id="drone_imagery_compare_images_drone_run_bands_select_step">Go to Next Step</button>
                    </center>
                </&>
                <&| /util/workflow.mas:step, title=> "Image Selection" &>
                    <& /page/page_title.mas, title=>"Select the images you are interested in comparing" &>

                    <table class="table table-bordered table-hover" id="drone_imagery_compare_images_images_type_table">
                        <thead>
                            <tr>
                                <th>Select</th>
                                <th>Field Trial</th>
                                <th>Imaging Event Name</th>
                                <th>Band Name</th>
                                <th>Band Type</th>
                                <th>Plot Polygon Type</th>
                                <th>Number of Images</th>
                            </tr>
                        </thead>
                    </table>

                    <br/><br/>

                    <center>
                    <button class="btn btn-primary" id="drone_imagery_compare_images_images_select_step">Go to Next Step</button>
                    </center>
                </&>
                <&| /util/workflow.mas:step, title=> "Result" &>
                    <& /page/page_title.mas, title=>"Image comparison results" &>

                    <div id="drone_imagery_compare_images_result_div"></div>
                </&>
            </&>

        </div>

      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="upload_drone_imagery_standard_process_additional_raw_images_dialog" name="upload_drone_imagery_standard_process_additional_raw_images_dialog" tabindex="-1" role="dialog" aria-labelledby="uploadDroneImageryStandardProcessAdditionalRawImagesDialog">
    <div class="modal-dialog modal-xl" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="uploadDroneImageryStandardProcessAdditionalRawImagesDialog">Upload Raw Image Captures</h4>
            </div>
            <div class="modal-body">
                <div class="container-fluid">

                    <&| /util/workflow.mas, id=> "drone_imagery_additional_raw_images_workflow" &>
                        <&| /util/workflow.mas:step, title=> "Uploaded Raw Aerial Image Captures" &>
                            <& /page/page_title.mas, title=>"Already Uploaded Raw Aerial Image Captures" &>

                            <div class="well well-sm">
                                <center>
                                <h4>Raw aerial image captures can be shared in a ZipFile.</h4>
                                </center>

                                <ul>
                                    <li>These ZipFiles are only for reference purposes and for distribution of the raw image captures.</li>
                                    <li>Raw image captures from any camera (e.g. MicaSense or color cameras) can be saved in a zipfile and shared here.</li>
                                    <li>The raw image captures are not stitched orthophotomosaic images.</li>
                                    <li>The ZipFile is not extracted or parsed by ImageBreed, it is only stored for distribution.</li>
                                </ul>
                            </div>

                            <div class="well well-sm">
                                <div id="upload_drone_imagery_additional_raw_images_div"></div>
                            </div>

                            <center>
                            <button class="btn btn-default" onclick="Workflow.complete(this); return false;" >Upload New Raw Image Captures</button>
                            </center>
                        </&>
                        <&| /util/workflow.mas:step, title=> "Upload New Aerial Image Captures" &>
                            <& /page/page_title.mas, title=>"Upload New Raw Aerial Image Captures" &>

                            <div class="well well-sm">
                                <center>
                                <h4>Raw aerial image captures can be shared in a ZipFile.</h4>
                                </center>

                                <ul>
                                    <li>These ZipFiles are only for reference purposes and for distribution of the raw image captures.</li>
                                    <li>Raw image captures from any camera (e.g. MicaSense or color cameras) can be saved in a zipfile and shared here.</li>
                                    <li>The raw image captures are not stitched orthophotomosaic images.</li>
                                    <li>The ZipFile is not extracted or parsed by ImageBreed, it is only stored for distribution.</li>
                                </ul>
                            </div>

                            <div class="well well-sm">
                                <form class="form-horizontal" role="form" method="post" enctype="multipart/form-data" encoding="multipart/form-data" id="upload_drone_imagery_additional_raw_images_form" name="upload_drone_imagery_additional_raw_images_form" action="/drone_imagery/upload_drone_imagery_additional_raw_images" >
                                    <div class="form-group">
                                        <label class="col-sm-6 control-label">Aerial Image Captures ZipFile (.zip): </label>
                                        <div class="col-sm-6" >
                                            <input type="file" id="upload_drone_imagery_additional_raw_images_zipfile" name="upload_drone_imagery_additional_raw_images_zipfile" encoding="multipart/form-data" />
                                        </div>
                                    </div>

                                    <input type="hidden" id="upload_drone_imagery_additional_raw_images_private_company_id" name="upload_drone_imagery_additional_raw_images_private_company_id" value="" />
                                    <input type="hidden" id="upload_drone_imagery_additional_raw_images_private_company_is_private" name="upload_drone_imagery_additional_raw_images_private_company_is_private" value="" />
                                    <input type="hidden" id="upload_drone_imagery_additional_raw_images_drone_run_id" name="upload_drone_imagery_additional_raw_images_drone_run_id" value="" />
                                    <input type="hidden" id="upload_drone_imagery_additional_raw_images_field_trial_id" name="upload_drone_imagery_additional_raw_images_field_trial_id" value="" />

                                    <center>
                                        <button type="submit" class="btn btn-primary" name="upload_drone_imagery_additional_raw_images_submit" id="upload_drone_imagery_additional_raw_images_submit">Submit</button>
                                    </center>

                                </form>
                            </div>

                        </&>
                    </&>

                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="drone_imagery_standard_process_raw_images_retrain_mask_rcnn_modal" name="drone_imagery_standard_process_raw_images_retrain_mask_rcnn_modal" tabindex="-1" role="dialog" aria-labelledby="droneImageryRetrainMaskRCNNDialog" data-backdrop="static">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="droneImageryRetrainMaskRCNNDialog">Retrain Mask R-CNN Model</h4>
      </div>
      <div class="modal-body">
        <div class="container-fluid">

            <div class="form-horizontal">
                <div class="form-group">
                    <label class="col-sm-3 control-label">Model Name (Must be unique):</label>
                    <div class="col-sm-9" >
                        <input class="form-control" type="text" id="drone_imagery_standard_process_raw_images_retrain_mask_rcnn_model_name" name="drone_imagery_standard_process_raw_images_retrain_mask_rcnn_model_name" >
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-3 control-label">Model Description:</label>
                    <div class="col-sm-9" >
                        <input class="form-control" type="text" id="drone_imagery_standard_process_raw_images_retrain_mask_rcnn_model_desc" name="drone_imagery_standard_process_raw_images_retrain_mask_rcnn_model_desc" >
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-3 control-label">Model Type:</label>
                    <div class="col-sm-9" >
                        <select class="form-control" id="drone_imagery_standard_process_raw_images_retrain_mask_rcnn_model_type">
                            <option value="Mask R-CNN">Mask R-CNN</option>
                        </select>
                    </div>
                </div>
            </div>

        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-primary" id="drone_imagery_standard_process_raw_images_retrain_mask_rcnn">Submit</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="drone_imagery_view_imaging_vehicles_modal" name="drone_imagery_view_imaging_vehicles_modal" tabindex="-1" role="dialog" aria-labelledby="droneImageryImagingVehiclesDialog" data-backdrop="static">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="droneImageryImagingVehiclesDialog">Available Imaging Vehicles</h4>
      </div>
      <div class="modal-body">
        <div class="container-fluid">

            <table class="table table-bordered table-hover" id="drone_imagery_view_imaging_vehicles_table">
                <thead>
                    <tr>
                        <th>Vehicles Name</th>
                        <th>Description</th>
                        <th>Company</th>
                        <th>Battery Usage</th>
                    </tr>
                </thead>
            </table>

            <button class="btn btn-primary" name="drone_run_imaging_vehicle_add_new">Add New Imaging Vehicle</button>

        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="upload_drone_imagery_geocoordinate_param_dialog" name="upload_drone_imagery_geocoordinate_param_dialog" tabindex="-1" role="dialog" aria-labelledby="uploadDroneImageryGeocoordinateParamDialog">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="uploadDroneImageryGeocoordinateParamDialog">Add GeoCoordinate Params</h4>
            </div>
            <div class="modal-body">
                <div class="container-fluid">

                    <form class="form-horizontal" role="form" method="post" enctype="multipart/form-data" encoding="multipart/form-data" id="upload_drone_imagery_geocoordinate_param_form" name="upload_drone_imagery_geocoordinate_param_form" action="/drone_imagery/upload_drone_imagery_geocoordinate_param">
                        <div class="form-group">
                            <label class="col-sm-6 control-label">WGS84/UTM GeoTIFF (.tif): (should be same dimensions as the originally uploaded reflectance maps)</label>
                            <div class="col-sm-6" >
                                <input type="file" id="upload_drone_imagery_geocoordinate_param_geotiff" name="upload_drone_imagery_geocoordinate_param_geotiff" encoding="multipart/form-data" />
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-6 control-label">GeoTIFF Type:</label>
                            <div class="col-sm-6" >
                                <select class="form-control" id="upload_drone_imagery_geocoordinate_param_type" name="upload_drone_imagery_geocoordinate_param_type">
                                    <option value="single">Single Channel GeoTIFF</option>
                                    <option value="rgb">RGB GeoTIFF</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-6 control-label">Save As Official Plot GeoJSON:</label>
                            <div class="col-sm-6" >
                                <select class="form-control" id="upload_drone_imagery_geocoordinate_param_overwrite_geojson" name="upload_drone_imagery_geocoordinate_param_overwrite_geojson">
                                    <option value="yes">Yes</option>
                                    <option value="no">No</option>
                                </select>
                            </div>
                        </div>
                        <input type="hidden" id="upload_drone_imagery_geocoordinate_param_field_trial_id" name="upload_drone_imagery_geocoordinate_param_field_trial_id" value="" />
                        <input type="hidden" id="upload_drone_imagery_geocoordinate_param_drone_run_id" name="upload_drone_imagery_geocoordinate_param_drone_run_id" value="" />

                        <center>
                            <button type="submit" class="btn btn-info" name="upload_drone_imagery_geocoordinate_param_submit" id="upload_drone_imagery_geocoordinate_param_submit">Submit</button>
                        </center>
                    </form><br/>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<& /breeders_toolbox/drone_imagery/upload_drone_imagery_dialogs.mas &>
