<%args>
$trial_id
</%args>

<& /util/import_javascript.mas, classes => ['jquery','jquery.dataTables'] &>
<& /util/import_css.mas, paths => ['/documents/inc/datatables/jquery.dataTables.css'] &>



<&| /page/info_section.mas, title => "Trial Soil Data", collapsible=>1, collapsed=>0 &>
    <div class = "well well-sm">
        <div class = "panel panel-default">
            <div class = "panel-body">
                <table id = "soil_data_table" class="table table-hover table-striped">
                </table>
            </div>
        </div>
    </div>
</&>

<script defer="defer">

jQuery(document).ready(function () {

    var soil_data_table = jQuery('#soil_data_table').DataTable({
        'autoWidth': false,
        'searching': false,
        'order': false,
        'ajax':'/ajax/breeders/trial/'+ <% $trial_id %> + '/all_soil_data',
        columns: [
            { title: "Soil Data ID", "data": "prop_id" },
            { title: "Description", "data": "description" },
            { title: "Year", "data": "year" },
            { title: "GPS", "data": "gps" },
            { title: "Type of Sampling", "data": "type_of_sampling" },
            { title: "Soil Data", "data": "soil_data" },
            { title: "Download", "data": "download_link" },
            { title: "Delete", "data": "null", "render": function ( data, type, row ) { return "<a onclick='deleteSoilData("+row.prop_id+")'>Delete</a>"; } },

        ]
    });

});

</script>
