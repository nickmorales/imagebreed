
<%args>
$private_company_id
$private_company_is_private
$field_trial_id
$field_trial_name
$drone_run_project_id
$drone_run_project_name
$original_image_id
$filtered_image_id
$filtered_side_span_image_id
$filtered_side_height_image_id
$collection_number
$collection_project_id
$database_field_name
</%args>

<& /util/import_javascript.mas, classes => [ 'jquery.iframe-post-form', 'CXGN.BreederSearch03152022', 'd3.d3v4Min.js', 'opencv.opencv', 'CXGN.Trial03152022', 'moment_min', 'daterangepicker', 'CXGN.ManageDroneImagery09072022', 'CXGN.ManageDroneRover10272022' ] &>


<& /page/page_title.mas, title=>"Manage Drone Rovers: Run A Standard Process For Plot Polygons" &>

<div class="well well-sm">
    <center>
        <h4>Please use the Brave or Chrome web-browsers to view these image tools. In the future, other browsers may be supported.</h4>
        <h4><a href="https://www.youtube.com/channel/UC1FYqz6kz9pE72sSHhG7ocQ">Watch tutorial videos from processing rover events</a>.</h4>
    </center>
</div>

<input type="hidden" id="plot_polygon_process_private_company_id" value="<% $private_company_id %>" />
<input type="hidden" id="plot_polygon_process_private_company_is_private" value="<% $private_company_is_private %>" />
<input type="hidden" id="plot_polygon_process_field_trial_id" value="<% $field_trial_id %>" />
<input type="hidden" id="plot_polygon_process_field_trial_name" value="<% $field_trial_name %>" />
<input type="hidden" id="plot_polygon_process_drone_run_project_id" value="<% $drone_run_project_id %>" />
<input type="hidden" id="plot_polygon_process_drone_run_project_name" value="<% $drone_run_project_name %>" />
<input type="hidden" id="plot_polygon_process_original_image_id" value="<% $original_image_id %>" />
<input type="hidden" id="plot_polygon_process_filtered_image_id" value="<% $filtered_image_id %>" />
<input type="hidden" id="plot_polygon_process_filtered_side_span_image_id" value="<% $filtered_side_span_image_id %>" />
<input type="hidden" id="plot_polygon_process_filtered_side_height_image_id" value="<% $filtered_side_height_image_id %>" />
<input type="hidden" id="plot_polygon_process_collection_number" value="<% $collection_number %>" />
<input type="hidden" id="plot_polygon_process_collection_project_id" value="<% $collection_project_id %>" />
<input type="hidden" id="plot_polygon_process_database_field_name" value="<% $database_field_name %>" />

<input type="hidden" id="pheno_heatmap_onswitch" />

<&| /util/workflow.mas, id=> "manage_drone_rover_plot_polygon_process_workflow" &>
    <&| /util/workflow.mas:step, title=> "Plot Polygons" &>
        <& /page/page_title.mas, title=>"Define plot polygons relative to the field layout" &>

        <div id="drone_rover_plot_polygons_process_run_info_section"></div>

        <div class="well well-sm">
            <div id="drone_rover_plot_polygons_process_top_section"></div>

            <b>Specify Number of Plots, then Drag Lines to Define Plot Polygons, and finally Assign Plot Numbers to Polygons</b>
        </div>

        <div id="drone_rover_plot_polygons_process_load_div">
            <img src="/img/wheel.gif" />
        </div>

        <div id="drone_rover_plot_polygons_process_image_div_svg"></div>
        <div id="drone_rover_plot_polygons_process_image_div_topview_svg"></div>
        <div id="drone_rover_plot_polygons_process_image_div_sideheight_svg"></div>

        <hr>
        <div class="well well-sm">
            <div id="drone_rover_plot_polygon_process_generated_polygons_table">First Complete the Templating Above</div>
        </div>

        <hr>
        <center>
        <h2>Field Layout References Below</h2>
        </center>
        <hr>

        <& /breeders_toolbox/trial/phenotype_heatmap.mas, trial_id => $field_trial_id, suppress_plot_pheno_dialog => 1 &>

        <hr>
        <div class="well well-sm">
            <div id="drone_rover_plot_polygons_process_trial_layout_div_0"></div>
            <div id="drone_rover_plot_polygons_process_trial_layout_div_1"></div>
            <div id="drone_rover_plot_polygons_process_trial_layout_div_2"></div>
            <div id="drone_rover_plot_polygons_process_trial_layout_div_3"></div>
            <div id="drone_rover_plot_polygons_process_trial_layout_div_4"></div>
            <div id="drone_rover_plot_polygons_process_trial_layout_div_5"></div>
            <div id="drone_rover_plot_polygons_process_trial_layout_div_6"></div>
            <div id="drone_rover_plot_polygons_process_trial_layout_div_7"></div>
            <div id="drone_rover_plot_polygons_process_trial_layout_div_8"></div>
            <div id="drone_rover_plot_polygons_process_trial_layout_div_9"></div>
            <div id="drone_rover_plot_polygons_process_trial_layout_div_10"></div>
            <div id="drone_rover_plot_polygons_process_trial_layout_div_11"></div>
            <div id="drone_rover_plot_polygons_process_trial_layout_div_12"></div>
            <div id="drone_rover_plot_polygons_process_trial_layout_div_13"></div>
            <div id="drone_rover_plot_polygons_process_trial_layout_div_14"></div>
            <div id="drone_rover_plot_polygons_process_trial_layout_div_15"></div>
            <div id="drone_rover_plot_polygons_process_trial_layout_div_16"></div>
            <div id="drone_rover_plot_polygons_process_trial_layout_div_17"></div>
            <div id="drone_rover_plot_polygons_process_trial_layout_div_18"></div>
            <div id="drone_rover_plot_polygons_process_trial_layout_div_19"></div>
            <div id="drone_rover_plot_polygons_process_trial_layout_div_20"></div>
            <div id="drone_rover_plot_polygons_process_trial_layout_div_21"></div>
            <div id="drone_rover_plot_polygons_process_trial_layout_div_22"></div>
            <div id="drone_rover_plot_polygons_process_trial_layout_div_23"></div>
            <div id="drone_rover_plot_polygons_process_trial_layout_div_24"></div>
            <div id="drone_rover_plot_polygons_process_trial_layout_div_25"></div>
            <div id="drone_rover_plot_polygons_process_trial_layout_div_26"></div>
            <div id="drone_rover_plot_polygons_process_trial_layout_div_27"></div>
            <div id="drone_rover_plot_polygons_process_trial_layout_div_28"></div>
            <div id="drone_rover_plot_polygons_process_trial_layout_div_29"></div>
            <div id="drone_rover_plot_polygons_process_trial_layout_div_30"></div>
        </div>

    </&>
    <&| /util/workflow.mas:step, title=> "Phenotypes" &>
        <& /page/page_title.mas, title=>"Calculate phenotypes for all 3D plot polygons" &>

        <form class="form-horizontal">
            <div class="well well-sm">
                <div class="form-group form-group-sm">
                    <label class="col-sm-4 control-label">Statistics to Calculate and Save in Database: </label>
                    <div class="col-sm-8">
                        <input name="drone_rover_plot_polygons_process_phenotypes_select" value="average_point_height" type="checkbox" checked disabled> Average Point Height-wise <br/>
                        <input name="drone_rover_plot_polygons_process_phenotypes_select" value="average_point_length" type="checkbox" checked disabled> Average Point Length-wise <br/>
                        <input name="drone_rover_plot_polygons_process_phenotypes_select" value="average_point_span" type="checkbox" checked disabled> Average Point Span-wise <br/>
                        <input name="drone_rover_plot_polygons_process_phenotypes_select" value="average_point_3d_volume" type="checkbox" checked disabled> Average Point 3D Volume <br/>
                        <input name="drone_rover_plot_polygons_process_phenotypes_select" value="height_density" type="checkbox" checked disabled> Height-wise Density <br/>
                        <input name="drone_rover_plot_polygons_process_phenotypes_select" value="length_density" type="checkbox" checked disabled> Length-wise Density <br/>
                        <input name="drone_rover_plot_polygons_process_phenotypes_select" value="span_density" type="checkbox" checked disabled> Span-wise Density <br/>
                        <input name="drone_rover_plot_polygons_process_phenotypes_select" value="3d_density" type="checkbox" checked disabled> Average 3D Density <br/>
                        <input name="drone_rover_plot_polygons_process_phenotypes_select" value="number_points" type="checkbox" checked disabled> Number of Points <br/>
                        <input name="drone_rover_plot_polygons_process_phenotypes_select" value="max_height" type="checkbox" checked disabled> Maximum Height Value <br/>
                        <input name="drone_rover_plot_polygons_process_phenotypes_select" value="max_length" type="checkbox" checked disabled> Maximum Length Value <br/>
                        <input name="drone_rover_plot_polygons_process_phenotypes_select" value="max_span" type="checkbox" checked disabled> Maximum Span Value <br/>
                        <input name="drone_rover_plot_polygons_process_phenotypes_select" value="min_height" type="checkbox" checked disabled> Minimum Height Value <br/>
                        <input name="drone_rover_plot_polygons_process_phenotypes_select" value="min_length" type="checkbox" checked disabled> Minimum Length Value <br/>
                        <input name="drone_rover_plot_polygons_process_phenotypes_select" value="min_span" type="checkbox" checked disabled> Minimum Span Value <br/>
                    </div>
                </div>
            </div>
        </form>
        <br/>

        <div id="drone_rover_plot_polygon_process_week_term_div"></div>

        <center>
        <button type="button" class="btn btn-info" id="manage_drone_rover_plot_polygon_process_phenotypes_step">Finish</button>
        </center>
    </&>
</&>


<script>

jQuery(document).ready(function() {

    jQuery('#pheno_heatmap_onswitch').trigger('click');

});

</script>
