<%args>


</%args>

<& /util/import_javascript.mas, classes => [ 'jquery', 'jquery.dataTables' ] &>

<div class="row" id="search_form_1" >
    <div class="col-sm-1">
    </div>
        <div class="row">
            <div class="col-sm-11">
                <div class="form-horizontal">
                    <div class="form-group">
                        <label class="control-label col-sm-4">Select a list of accessions:</label>
                        <div class="col-sm-8" >
                            <div class="input-group">
                                <select class="form-control" id="accession_list_select">
                                    <option value="">Select a list of accessions</option>
                                </select>
                                <div class="input-group-btn">
                                    <button class="btn btn-info" id="search_parents"><i class="glyphicon glyphicon-search"></i> Parents </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
</div>

<&| /page/info_section.mas, title => 'Search Results' , collapsible=>1, collapsed=>0 &>

    <link rel="stylesheet" type="text/css" href="/documents/inc/datatables/jquery.dataTables.css">

    <table id="parent_search_results" width="100%" class="table table-hover table-striped">
        <thead>
            <tr>
                <th>Female Parent</th>
                <th>Male Parent</th>
                <th>Number of Accessions</th>
                <th>Accession Names</th>
            </tr>
        </thead>
    </table>
</&>


<script>


jQuery(document).ready(function (){

    var lo = new CXGN.List();

    jQuery('#accession_list_select').html(lo.listSelect('accession_list_select', ['accessions'], 'Select a list of accessions', undefined, undefined));

    jQuery("#search_parents").click(function(){
        var accession_list_id = jQuery('#accession_list_select').val();
        if (!accession_list_id) {
            alert("Please select a list of accessions");
            return;
        }

        var table = jQuery('#parent_search_results').DataTable({
            'destroy' : true,
            'ajax': { 'url':'/ajax/search/common_parents',
                'data':{
                    'accession_list_id': accession_list_id,
                }
            },


        });

    });



});


</script>
